(function(e){function t(t){for(var r,a,i=t[0],s=t[1],u=t[2],d=0,f=[];d<i.length;d++)a=i[d],c[a]&&f.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},c={app:0},o=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0af48a":"c514bf00","chunk-ee8951ba":"665286f6","chunk-4f3db758":"a5604cb6","chunk-61ebce74":"b1bfa1b8","chunk-77ccfe5d":"c44fc630","chunk-7af4f6d9":"7b994b87","chunk-bc6b6e42":"a38c2033","chunk-c45573d2":"3dc5327e","chunk-03cd6f79":"9af4bd93","chunk-1614ecd9":"e40df14d","chunk-51c60435":"c859d836","chunk-59b4990f":"c49c3bfe","chunk-6bc53908":"062e952a","chunk-fe524208":"e8f53c89","chunk-3d8e64f7":"d8430f80","chunk-5264e025":"e7273ef4","chunk-db6349ea":"41ccfd07"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-ee8951ba":1,"chunk-4f3db758":1,"chunk-61ebce74":1,"chunk-77ccfe5d":1,"chunk-7af4f6d9":1,"chunk-bc6b6e42":1,"chunk-03cd6f79":1,"chunk-1614ecd9":1,"chunk-51c60435":1,"chunk-59b4990f":1,"chunk-6bc53908":1,"chunk-fe524208":1,"chunk-3d8e64f7":1,"chunk-5264e025":1,"chunk-db6349ea":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2d0af48a":"31d6cfe0","chunk-ee8951ba":"981b6ca0","chunk-4f3db758":"0e433876","chunk-61ebce74":"4eab9071","chunk-77ccfe5d":"e9bfffc6","chunk-7af4f6d9":"0e433876","chunk-bc6b6e42":"b7efce5c","chunk-c45573d2":"31d6cfe0","chunk-03cd6f79":"93ff9eba","chunk-1614ecd9":"1754bc03","chunk-51c60435":"07602149","chunk-59b4990f":"5396c40a","chunk-6bc53908":"f2180f2e","chunk-fe524208":"19724335","chunk-3d8e64f7":"cfde78c9","chunk-5264e025":"3a85e36f","chunk-db6349ea":"eb18f656"}[e]+".css",c=s.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===r||d===c))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){u=f[i],d=u.getAttribute("data-href");if(d===r||d===c)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var r=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.request=r,delete a[e],l.parentNode.removeChild(l),n(o)},l.href=c;var m=document.getElementsByTagName("head")[0];m.appendChild(l)}).then(function(){a[e]=0}));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=c[e]=[t,n]});t.push(r[2]=o);var u,d=document.getElementsByTagName("head")[0],f=document.createElement("script");f.charset="utf-8",f.timeout=120,s.nc&&f.setAttribute("nonce",s.nc),f.src=i(e),u=function(t){f.onerror=f.onload=null,clearTimeout(l);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}c[e]=void 0}};var l=setTimeout(function(){u({type:"timeout",target:f})},12e4);f.onerror=f.onload=u,d.appendChild(f)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var l=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"39e5":function(e,t,n){"use strict";var r=n("82c8"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=n("bc3a"),c=n.n(a),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("md-app",{attrs:{"md-waterfall":""}},[n("md-app-drawer",{staticClass:"super-bg md-primary nav-sidebar",attrs:{"md-active":e.showSidebar,"md-persistent":"mini"}},[n("md-list",[n("md-list-item",{on:{click:function(t){e.showSidebar=!e.showSidebar}}},[n("md-icon",[e._v(e._s(e.showSidebar?"chevron_left":"chevron_right"))]),n("span",{staticClass:"md-list-item-text"})],1)],1),n("nav-drawer"),n("div",{staticClass:"md-caption credits"},[n("a",{attrs:{href:"https://speckle.works",target:"_blank"}},[n("img",{attrs:{src:"https://speckle.works/img/logos/logo-xs.png",width:"19px"}})])])],1),n("md-app-content",[n("keep-alive",{attrs:{exclude:"StreamDetailView"}},[n("router-view")],1)],1)],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$store.state.isAuth?n("md-list",[n("md-list-item",{attrs:{to:"/"}},[n("md-icon",[e._v("home")]),n("span",{staticClass:"md-list-item-text"},[e._v("Home")])],1),n("md-list-item",{attrs:{to:"/streams"}},[n("md-icon",[e._v("import_export")]),n("span",{staticClass:"md-list-item-text"},[e._v("Streams")])],1),n("md-list-item",{attrs:{to:"/projects"}},[n("md-icon",[e._v("business")]),n("span",{staticClass:"md-list-item-text"},[e._v("Projects")])],1),n("md-list-item",{attrs:{to:"/trash"}},[n("md-icon",[e._v("delete_outline")]),n("span",{staticClass:"md-list-item-text"},[e._v("Trash")])],1),n("md-divider",{attrs:{"md-inset":""}}),n("md-list-item",{attrs:{to:"/profile"}},[n("md-icon",[e._v("face")]),n("span",{staticClass:"md-list-item-text"},[e._v("Profile")])],1),n("md-list-item",{attrs:{to:"/plugins"}},[n("md-icon",[e._v("category")]),n("span",{staticClass:"md-list-item-text"},[e._v("Plugins")])],1),n("md-list-item",{attrs:{to:"/feedback"}},[n("md-icon",[e._v("feedback")]),n("span",{staticClass:"md-list-item-text"},[e._v("Feedback")])],1)],1):n("md-list",[n("md-list-item",{attrs:{to:"/login"}},[n("md-icon",[e._v("face")]),n("span",{staticClass:"md-list-item-text"},[e._v("Login")])],1),n("md-list-item",{attrs:{to:"/register"}},[n("md-icon",[e._v("add")]),n("span",{staticClass:"md-list-item-text"},[e._v("Register")])],1)],1)],1)},u=[],d={name:"SiteNavigation"},f=d,l=(n("39e5"),n("2877")),m=Object(l["a"])(f,s,u,!1,null,null,null);m.options.__file="NavDrawer.vue";var h=m.exports,p={name:"MainApp",components:{NavDrawer:h},data:function(e){return{showSidebar:!0}},created:function(){this.$store.state.isAuth&&(this.$store.dispatch("getStreams","omit=objects,layers&isComputedResult=false&sort=updatedAt"),this.$store.dispatch("getProjects"))},updated:function(){var e=document.getElementsByClassName("md-overlay")[0];e&&(e.onclick=function(){this.showSidebar=!1}.bind(this))}},v=p,b=(n("5c0b"),Object(l["a"])(v,o,i,!1,null,null,null));b.options.__file="App.vue";var g=b.exports,E=n("8c4f"),_=(n("5df3"),n("4f7f"),n("ac4d"),n("8a81"),n("2909")),k=(n("456d"),n("7514"),n("20d6"),n("7f7f"),n("6762"),n("2fdb"),n("28a5"),n("6b54"),n("ac6a"),n("2f62")),A=n("c36e"),S=n.n(A),T=n("c64e"),j=n.n(T);r["default"].use(k["a"]);var w=new k["a"].Store({state:{server:null,serverManifest:null,token:null,user:{},isAuth:!1,streams:[],deStreams:[],clients:[],projects:[],comments:[],users:[]},getters:{streamClients:function(e){return function(t){return e.clients.filter(function(e){return e.streamId===t})}},filteredStreams:function(e){return function(t){var n=e.streams.filter(function(e){return null==e.parent&&!1===e.deleted});return t&&0!==t.length?(t.forEach(function(t){switch(t.key=t.key.toLowerCase(),t.key){case"private":n=t.value?n.filter(function(e){return e.private.toString()===t.value}):n.filter(function(e){return!0===e.private});break;case"public":n=t.value?n.filter(function(e){return(!e.private).toString()===t.value}):n.filter(function(e){return!1===e.private});break;case"tag":case"tags":var r=t.value.split(",").map(function(e){return e.toLowerCase()});n=n.filter(function(e){var t=e.tags.map(function(e){return e.toLowerCase()});return r.every(function(e){return t.includes(e)})});break;case"mine":n=n.filter(function(t){return t.owner===e.user._id});break;case"shared":n=n.filter(function(t){return t.owner!==e.user._id});break;case"name":n=n.filter(function(e){return e.name.toLowerCase().includes(t.value.toLowerCase())});break;case"streamid":case"id":n=n.filter(function(e){return e.streamId.toLowerCase().includes(t.value.toLowerCase())});break}}),n):n}}},mutations:{ADD_STREAMS:function(e,t){t.forEach(function(t){-1===e.streams.findIndex(function(e){return e.streamId===t.streamId})&&(t.description||(t.description="..."),t.tags||(t.tags=[]),e.streams.unshift(t))})},UPDATE_STREAM:function(e,t){var n=e.streams.find(function(e){return e.streamId===t.streamId});Object.keys(t).forEach(function(e){n[e]=t[e]})},UPDATE_STREAM_DATA:function(e,t){var n=e.streams.find(function(e){return e.streamId===t.streamId});t.layers&&(n.layers=t.layers)},DELETE_STREAM:function(e,t){var n=e.streams.findIndex(function(e){return e.streamId===t.streamId});n>-1?e.streams.splice(n,1):console.log("Failed to remove stream ".concat(t.streamId," from store."))},ADD_CLIENTS:function(e,t){t.forEach(function(t){-1===e.clients.findIndex(function(e){return e._id===t._id})&&e.clients.push(t)})},ADD_DE_STREAM:function(e,t){var n=e.deStreams.find(function(e){return e.streamId===t});n?(n.layers=t.layers,n.objects=t.objects):e.deStreams.push(t)},ADD_DE_STREAM_LAYER:function(e,t){console.log(t);var n=e.deStreams.find(function(e){return e.streamId===t.streamId}),r={name:"Param group ".concat(n.layers.length+1),orderIndex:n.layers.length,startIndex:n.objects.length,objectCount:0,topology:"0-0",guid:j()()};n.layers.push(r)},UPDATE_DE_STREAM_LAYER:function(e,t){var n=t.streamId,r=t.layer,a=t.objects,c=e.deStreams.find(function(e){return e.streamId===n}),o=!1,i=0;c.layers.forEach(function(e){if(o)e.startIndex+=i;else if(e.guid===r.guid){var t;e.name=r.name,e.topology="0-".concat(a.length),i=a.length-e.objectCount,(t=c.objects).splice.apply(t,[e.startIndex,e.objectCount].concat(Object(_["a"])(a))),e.objectCount=a.length,o=!0}})},REMOVE_DE_STREAM_LAYER:function(e,t){var n=t.streamId,r=t.layer,a=e.deStreams.find(function(e){return e.streamId===n});a.objects.splice(r.startIndex,r.objectCount);var c=!1;a.layers.forEach(function(e){c?(e.startIndex-=r.objectCount,e.orderIndex-=1):e.guid===r.guid&&(c=!0)}),a.layers=a.layers.filter(function(e){return e.guid!==r.guid})},APPEND_DE_STREAM_LAYERS_FROM_CSV:function(e,t){var n=t.streamId,r=t.transposed,a=e.deStreams.find(function(e){return e.streamId===n}),c=!0,o=!1,i=void 0;try{for(var s,u=r[Symbol.iterator]();!(c=(s=u.next()).done);c=!0){var d,f=s.value,l={name:""!==f[0]?f[0]:"Unnamed",orderIndex:-1,startIndex:a.objects.length,objectCount:f.length-1,topology:"0-".concat(f.length-1),guid:j()()};a.layers.push(l);var m=f.slice(1,f.length);console.log(m),(d=a.objects).push.apply(d,Object(_["a"])(m.map(function(e){return e?"boolean"===typeof e?{type:"Boolean",value:e}:"number"===typeof e?{type:"Number",value:e}:"string"===typeof e?{type:"String",value:e}:void 0:{type:"Null",value:""}}))),0}}catch(h){o=!0,i=h}finally{try{c||null==u.return||u.return()}finally{if(o)throw i}}a.layers.forEach(function(e,t){console.log(t),e.orderIndex=t})},ADD_PROJECTS:function(e,t){t.forEach(function(t){-1===e.projects.findIndex(function(e){return e._id===t._id})&&(t.tags||(t.tags=[]),t.deleted||(t.deleted=!1),e.projects.unshift(t))})},UPDATE_PROJECT:function(e,t){var n=e.projects.find(function(e){return e._id===t._id});Object.keys(t).forEach(function(e){n[e]=t[e]})},DELETE_PROJECT:function(e,t){var n=e.projects.findIndex(function(e){return e._id===t._id});n>-1?e.projects.splice(n,1):console.log("Failed to remove project ".concat(t._id," from store."))},ADD_USER:function(e,t){var n=e.users.find(function(e){return e._id===t._id});n?n=t:e.users.unshift(t)},ADD_USERS:function(e,t){t.forEach(function(t){var n=e.users.find(function(e){return e._id===t._id});n?n=t:e.users.unshift(t)})},UPDATE_LUSER:function(e,t){var n=null;if(n=t._id===e.user._id?e.user:e.users.find(function(e){return e._id===t._id}),!n)return console.error("User not found; aborting update.");Object.keys(t).forEach(function(e){n[e]=t[e]})},SET_SERVER:function(e,t){e.server=t},SET_SERVER_DETAILS:function(e,t){e.serverManifest=t},SET_TOKEN:function(e,t){e.token=t,e.isAuth=!0},SET_USER:function(e,t){e.user=t},FLUSH_ALL:function(e){e.token=null,e.user={},e.streams=[],e.projects=[],e.clients=[],e.users=[],e.comments=[],e.isAuth=!1}},actions:{getStream:function(e,t){return new Promise(function(n,r){var a=e.state.streams.find(function(e){return e.streamId===t.streamId});if(a)return n(a);c.a.get("streams/".concat(t.streamId,"?omit=objects")).then(function(t){return e.commit("ADD_STREAMS",[t.data.resource]),n(t)}).catch(function(e){return r(e)})})},getStreams:function(e,t){return new Promise(function(n,r){c.a.get("streams?".concat(t||"")).then(function(t){return e.commit("ADD_STREAMS",t.data.resources),n(t.data.resources)}).catch(function(e){return console.log(e),r(e)})})},createStream:function(e,t){return new Promise(function(n,r){c.a.post("streams").then(function(n){return console.log(n),t.streamId=n.data.resource.streamId,n.data.resource.onlineEditable=!0,e.commit("ADD_STREAMS",[n.data.resource]),c.a.put("streams/".concat(n.data.resource.streamId),t)}).then(function(r){return console.log(r),e.commit("UPDATE_STREAM",t),n(t)}).catch(function(e){return console.error(e),r(e)})})},updateStream:function(e,t){c.a.put("streams/".concat(t.streamId),t).then(function(n){e.commit("UPDATE_STREAM",t)}).catch(function(e){console.warn(e)})},updateStreamObjectsAndLayers:function(e,t){var n=t.streamId,r=t.commitMessage;return new Promise(function(t,a){var o=e.state.deStreams.find(function(e){return e.streamId===n});if(!o)return a(new Error("Stream not found in store."));o.commitMessage=r+" (changed by ".concat(e.state.user.name," ").concat(e.state.user.surname,")"),o.lastChangedBy=e.state.user._id,e.commit("UPDATE_STREAM",{streamId:n,commitMessage:r}),c.a.post("streams/".concat(n,"/clone")).then(function(t){var r=e.state.streams.find(function(e){return e.streamId===n});return e.commit("UPDATE_STREAM",{streamId:n,children:Object(_["a"])(r.children).concat([t.data.clone.streamId])}),c.a.put("streams/".concat(n),o)}).then(function(e){return t(e)}).catch(function(e){return a(e)})})},getStreamClients:function(e,t){c.a.get("streams/".concat(t.streamId,"/clients")).then(function(t){e.commit("ADD_CLIENTS",t.data.resources)}).catch(function(e){console.log(e)})},deleteStream:function(e,t){c.a.delete("streams/".concat(t.streamId)).then(function(n){e.commit("DELETE_STREAM",{streamId:t.streamId})}).catch(function(e){console.log(e)})},getProject:function(e,t){return new Promise(function(n,r){c.a.get("projects/".concat(t._id)).then(function(t){return e.commit("ADD_PROJECTS",[t.data.resource]),n(t)}).catch(function(e){return console.error(e),r(e)})})},getProjects:function(e,t){return new Promise(function(n,r){c.a.get("projects?".concat(t||"")).then(function(t){return e.commit("ADD_PROJECTS",t.data.resources),n(t.data.resources)}).catch(function(e){return console.log(e),r(e)})})},createProject:function(e,t){return new Promise(function(n,r){c.a.post("projects",t||{name:"A new speckle project"}).then(function(t){return e.commit("ADD_PROJECTS",[t.data.resource]),n(t.data.resource)}).catch(function(e){return console.log(e),r(e)})})},updateProject:function(e,t){c.a.put("projects/".concat(t._id),t).then(function(n){e.commit("UPDATE_PROJECT",t)}).catch(function(e){console.warn(e)})},addUserToProject:function(e,t){var n=t.projectId,r=t.userId;return new Promise(function(t,a){var o=e.state.projects.find(function(e){return e._id===n});if(!o)return a(new Error("Failed to find project in state."));c.a.put("projects/".concat(n,"/adduser/").concat(r)).then(function(a){var c={canWrite:Object(_["a"])(new Set(Object(_["a"])(o.permissions.canWrite).concat([r]))),canRead:o.permissions.canRead},i=Object(_["a"])(new Set(Object(_["a"])(o.canRead).concat([r])));return e.commit("UPDATE_PROJECT",{_id:n,permissions:c,canRead:i}),o.streams.forEach(function(t){var n=e.state.streams.find(function(e){return e.streamId===t});e.commit("UPDATE_STREAM",{streamId:t,canWrite:S()(Object(_["a"])(n.canWrite).concat([r]))})}),t()}).catch(function(e){return console.warn(e),a(e)})})},upgradeUserInProject:function(e,t){var n=t.projectId,r=t.userId;return new Promise(function(t,a){var o=e.state.projects.find(function(e){return e._id===n});if(!o)return a(new Error("Failed to find project in state."));c.a.put("projects/".concat(n,"/upgradeuser/").concat(r)).then(function(a){return e.commit("UPDATE_PROJECT",{_id:n,permissions:{canRead:S()(Object(_["a"])(o.canRead).concat([r])),canWrite:S()(Object(_["a"])(o.canWrite).concat([r]))}}),o.streams.forEach(function(t){var n=e.state.streams.find(function(e){return e.streamId===t});e.commit("UPDATE_STREAM",{streamId:t,canWrite:S()(Object(_["a"])(n.canWrite).concat([r])),canRead:S()(Object(_["a"])(n.canRead).concat([r]))})}),t()}).catch(function(e){return console.warn(e),a(e)})})},downgradeUserInProject:function(e,t){var n=t.projectId,r=t.userId;return new Promise(function(t,a){var o=e.state.projects.find(function(e){return e._id===n});if(!o)return a(new Error("Failed to find project in state."));c.a.put("projects/".concat(n,"/downgradeuser/").concat(r)).then(function(a){return e.commit("UPDATE_PROJECT",{_id:n,permissions:a.data.project.permissions}),a.data.streamsToAddReadAndPullWrite.forEach(function(t){var n=e.state.streams.find(function(e){return e.streamId===t});e.commit("UPDATE_STREAM",{streamId:t,canWrite:n.canWrite.filter(function(e){return e!==r}),canRead:S()(Object(_["a"])(n.canRead).concat([r]))})}),a.data.streamsToAddToRead.forEach(function(t){var n=e.state.streams.find(function(e){return e.streamId===t});e.commit("UPDATE_STREAM",{streamId:t,canRead:S()(Object(_["a"])(n.canRead).concat([r]))})}),t()}).catch(function(e){return console.warn(e),a(e)})})},removeUserInProject:function(e,t){var n=t.projectId,r=t.userId;return new Promise(function(t,a){var o=e.state.projects.find(function(e){return e._id===n});if(!o)return a(new Error("Failed to find project in state."));c.a.delete("projects/".concat(n,"/removeuser/").concat(r)).then(function(a){return e.commit("UPDATE_PROJECT",{_id:n,canRead:a.data.project.canRead,canWrite:a.data.project.canWrite,permissions:a.data.project.permissions}),a.data.streamsToPullBothFrom.forEach(function(t){var n=e.state.streams.find(function(e){return e.streamId===t});e.commit("UPDATE_STREAM",{streamId:t,canRead:n.canRead.filter(function(e){return e!==r}),canWrite:n.canWrite.filter(function(e){return e!==r})})}),a.data.streamsToPullWriteFrom.forEach(function(t){var n=e.state.streams.find(function(e){return e.streamId===t});e.commit("UPDATE_STREAM",{streamId:t,canWrite:n.canWrite.filter(function(e){return e!==r})})}),a.data.streamsToPullReadFrom.forEach(function(t){var n=e.state.streams.find(function(e){return e.streamId===t});e.commit("UPDATE_STREAM",{streamId:t,canRead:n.canRead.filter(function(e){return e!==r})})}),t()}).catch(function(e){return console.warn(e),a(e)})})},addStreamToProject:function(e,t){var n=t.projectId,r=t.streamId;return new Promise(function(t,a){var o=e.state.projects.find(function(e){return e._id===n});if(!o)return a(new Error("Failed to find project in state."));c.a.put("projects/".concat(n,"/addstream/").concat(r)).then(function(a){return e.commit("UPDATE_PROJECT",{_id:n,streams:a.data.project.streams}),e.commit("UPDATE_STREAM",{streamId:r,canRead:a.data.stream.canRead,canWrite:a.data.stream.canWrite}),t()}).catch(function(e){return console.warn(e),a(e)})})},removeStreamFromProject:function(e,t){var n=t.projectId,r=t.streamId;return new Promise(function(t,a){var o=e.state.projects.find(function(e){return e._id===n});if(!o)return a(new Error("Failed to find project in state."));c.a.delete("projects/".concat(n,"/removestream/").concat(r)).then(function(a){return e.commit("UPDATE_PROJECT",{_id:n,streams:a.data.project.streams}),e.commit("UPDATE_STREAM",{streamId:r,canRead:a.data.stream.canRead,canWrite:a.data.stream.canWrite}),t()}).catch(function(e){return console.warn(e),a(e)})})},deleteProject:function(e,t){return new Promise(function(n,r){c.a.delete("projects/".concat(t._id)).then(function(r){e.commit("DELETE_PROJECT",{_id:t._id});var a=!0,c=!1,o=void 0;try{for(var i,s=r.data.modifiedStreams[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var u=i.value;e.commit("UPDATE_STREAM",{streamId:u.streamId,canRead:u.canRead,canWrite:u.canWrite})}}catch(d){c=!0,o=d}finally{try{a||null==s.return||s.return()}finally{if(c)throw o}}return n()}).catch(function(e){return console.warn(e),r(e)})})},getUser:function(e,t){return new Promise(function(n,r){var a=e.state.users.find(function(e){return e._id===t._id});if(a)return n(a);c.a.get("accounts/".concat(t._id)).then(function(r){return e.state.user._id===t._id&&(r.data.resource.surname+=" (that is you!)"),e.commit("ADD_USER",r.data.resource),n(r.data.resource)}).catch(function(e){return r(e)})})},updateLoggedInUser:function(e,t){return new Promise(function(n,r){c.a.put("accounts",t).then(function(r){return e.commit("UPDATE_LUSER",t),n(r)}).catch(function(e){return r(e)})})},login:function(e,t){return new Promise(function(n,r){c.a.post("accounts/login",{email:t.email,password:t.password}).then(function(t){return e.commit("SET_TOKEN",t.data.resource.token),e.commit("SET_USER",t.data.resource),localStorage.setItem("token",t.data.resource.token),c.a.defaults.headers.common["Authorization"]=t.data.resource.token,n(t.data.resource)}).catch(function(e){return r(e)})})},logout:function(e,t){e.commit("FLUSH_ALL"),localStorage.removeItem("token"),c.a.defaults.headers.common["Authorization"]=""}}});r["default"].use(E["a"]);var P=new E["a"]({linkExactActiveClass:"is-active",routes:[{path:"/",name:"dashboard",component:function(){return n.e("chunk-bc6b6e42").then(n.bind(null,"7277"))},meta:{requiresAuth:!0}},{path:"/login/:redirectTo?",name:"login",component:function(){return n.e("chunk-61ebce74").then(n.bind(null,"a55b"))}},{path:"/register",name:"register",component:function(){return n.e("chunk-db6349ea").then(n.bind(null,"73cf"))}},{path:"/streams",name:"streams",component:function(){return Promise.all([n.e("chunk-2d0af48a"),n.e("chunk-ee8951ba")]).then(n.bind(null,"cf8c"))},meta:{requiresAuth:!0}},{path:"/streams/:streamId",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-2d0af48a"),n.e("chunk-59b4990f")]).then(n.bind(null,"7057"))},meta:{requiresAuth:!0},children:[{name:"streamoverview",path:"",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-2d0af48a"),n.e("chunk-6bc53908")]).then(n.bind(null,"a29c"))}},{name:"streamdata",path:"data",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-3d8e64f7")]).then(n.bind(null,"05ce"))}},{name:"streamsharing",path:"sharing",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-5264e025")]).then(n.bind(null,"69e0"))}},{name:"streamhistory",path:"history",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-03cd6f79")]).then(n.bind(null,"6a14"))}}]},{path:"/projects",name:"projects",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-2d0af48a"),n.e("chunk-fe524208")]).then(n.bind(null,"acca"))},meta:{requiresAuth:!0}},{path:"/projects/:projectId",name:"singleproject",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-2d0af48a"),n.e("chunk-1614ecd9")]).then(n.bind(null,"07bd"))},meta:{requiresAuth:!0}},{path:"/trash",name:"trash",component:function(){return Promise.all([n.e("chunk-c45573d2"),n.e("chunk-2d0af48a"),n.e("chunk-51c60435")]).then(n.bind(null,"27c8"))},meta:{requiresAuth:!0}},{path:"/profile",name:"profile",component:function(){return n.e("chunk-77ccfe5d").then(n.bind(null,"c66d"))},meta:{requiresAuth:!0}},{path:"/plugins",name:"plugins",component:function(){return n.e("chunk-4f3db758").then(n.bind(null,"793c"))},meta:{requiresAuth:!0}},{path:"/feedback",name:"feedback",component:function(){return n.e("chunk-7af4f6d9").then(n.bind(null,"6e7a"))},meta:{requiresAuth:!0}}]});P.beforeEach(function(e,t,n){if(e.meta.requiresAuth&&!0===e.meta.requiresAuth&&!1===w.state.isAuth)return n({path:"/login"+(null!==e?"/"+window.btoa(e.path):"")});n()});var y=P,I=n("9483");Object(I["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var R=n("43f9"),D=n.n(R),x=(n("51de"),n("e094"),n("8682")),C=n("4710"),O=n.n(C),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("span",{attrs:{title:e.hint,contenteditable:!e.disabled},domProps:{innerHTML:e._s(e.getContent())},on:{blur:e.updateOnBlur,keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.updateOnEnter(t):null}}}),n("md-tooltip",[e._v(e._s(e.hint))])],1)},M=[],L=(n("a481"),{name:"EditableSpan",props:{text:{type:String,default:"loading..."},disabled:{type:Boolean,default:!1},hint:{type:String,default:"click and type to edit"},dataKey:{type:String,default:""}},computed:{},data:function(){return{innerText:null}},methods:{getContent:function(){return this.innerText&&""!==this.innerText.replace(/(\r\n|\n|\r)/gm,"")?this.innerText:this.text},updateOnBlur:function(e){var t=e.target.innerText.replace(/(\r\n|\n|\r)/gm,"");if(console.log(t.length),""===t)return e.target.innerText=this.text;this.getContent()!==t&&(this.innerText=t,this.$emit("update",{text:t,dataKey:this.dataKey}))},updateOnEnter:function(e){var t=e.target.innerText.replace(/(\r\n|\n|\r)/gm,"");if(""===t)return e.target.innerText=this.text;this.getContent()!==t?(e.target.blur(),this.innerText=t):e.target.blur()}}}),W=L,F=(n("e526"),Object(l["a"])(W,U,M,!1,null,"7c4414b4",null));F.options.__file="EditableSpan.vue";var N=F.exports;r["default"].config.productionTip=!1,r["default"].use(D.a),r["default"].use(x["a"],{locale:"en"});var J=localStorage.getItem("server");J&&(w.state.server=J),c.a.defaults.baseURL=w.state.server;var q=localStorage.getItem("token");c.a.get(w.state.server).then(function(e){return w.state.serverManifest=e.data,c.a.get("".concat(w.state.server,"/accounts?omit=logins"),{headers:{Authorization:q}})}).then(function(e){null!==e&&200===e.status?(c.a.defaults.headers.common["Authorization"]=q,w.state.isAuth=!0,w.state.user=e.data.resource,w.state.token=q,$()):$()}).catch(function(e){$()}),r["default"].prototype.$http=c.a,window.bus=new r["default"];var B=new O.a;r["default"].mixin({methods:{getHexFromString:function(e){return B.hex(e)}}}),r["default"].component("editable-span",N);var $=function(){new r["default"]({router:y,store:w,render:function(e){return e(g)}}).$mount("#app")}},"597e":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),a=n.n(r);a.a},"5e27":function(e,t,n){},"82c8":function(e,t,n){},e526:function(e,t,n){"use strict";var r=n("597e"),a=n.n(r);a.a}});
//# sourceMappingURL=app.70c69efc.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fd5777f"],{"07bd":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.project?s("v-container",{attrs:{"grid-list-xl":""}},[t.project.deleted?s("v-toolbar",{attrs:{absolute:""}},[s("span",[t._v("This project is in your trashbin. ")]),s("v-spacer"),t.canEdit?s("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){return t.restore(e)}}},[t._v(" Restore? ")]):t._e()],1):t._e(),s("v-layout",{staticClass:"mb-3",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("project-detail-title",{attrs:{project:t.project}})],1),s("v-flex",{attrs:{xs12:""}},[s("detail-description",{attrs:{resource:t.project}})],1),s("v-flex",{attrs:{xs12:"",sm12:"",lg6:""}},[s("v-card",{staticClass:"elevation-0"},[s("v-card-title",{staticClass:"title font-weight-light"},[s("v-icon",{attrs:{small:"",left:""}},[t._v("supervisor_account")]),t._v(" \n          Users\n        ")],1),s("v-card-text",[t.canEdit?s("user-search",{on:{"selected-user":t.addUserToTeam}}):t._e(),s("permission-table",{attrs:{project:t.project,"global-disabled":!t.canEdit},on:{"remove-user":function(t){},"move-user":function(t){}}})],1)],1)],1),s("v-flex",{attrs:{xs12:"",sm12:"",lg6:""}},[s("v-card",{staticClass:"elevation-0"},[s("v-card-title",{staticClass:"title font-weight-light"},[s("v-icon",{attrs:{small:"",left:""}},[t._v("import_export")]),t._v(" \n          Streams\n        ")],1),s("v-card-text",[s("project-detail-streams",{attrs:{project:t.project},on:{"selected-stream":t.addStream,"remove-stream":t.removeStream}})],1)],1)],1)],1)],1):t._e()},a=[],i=(s("ac6a"),s("75fc")),n=(s("7514"),s("13bb")),o=s.n(n),c=s("c36e"),l=s.n(c),d=s("6ec6"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.allUsersPop.length>0&&t.project?s("v-container",{staticClass:"pa-0 ma-0",attrs:{"grid-list-sm":""}},[s("v-layout",{attrs:{row:"",wrap:""}},t._l(t.allUsersPop,function(e){return e?s("v-flex",{key:e._id,attrs:{xs12:""}},[s("user-perm-card",{attrs:{user:e,project:t.project,"global-disabled":t.globalDisabled},on:{"change-permission-streams":t.changePermissionStreams,"change-permission-project":t.changePermissionProject,"remove-user":t.removeUser}})],1):t._e()}),1)],1):t._e()},p=[],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.user?s("v-card",{staticClass:"pa-3 elevation-0",class:{disabled:t.user.archived},attrs:{tile:""}},[s("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-space-between":""}},[s("v-flex",{attrs:{xs8:""}},[s("span",[t._v(t._s(t.user.name)+" "+t._s(t.user.surname))]),s("br"),s("span",{staticClass:"caption"},[t._v(t._s(t.user.company))]),s("br"),t.user.archived?s("span",{staticClass:"caption"},[t._v("archived")]):t._e()]),s("v-flex",{attrs:{xs4:""}},[s("v-btn",{attrs:{block:"",depressed:"",small:"",color:t.hasWritePermissionStreams?"primary":"",disabled:!t.canEdit},nativeOn:{click:function(e){return t.changePermissionStreams()}}},[t._v("\n        "+t._s(t.user.isOwner?"write streams":t.hasWritePermissionStreams?"write streams":"read streams")+"\n      ")]),s("v-btn",{attrs:{block:"",depressed:"",small:"",color:t.hasWritePermissionProject?"primary":"",disabled:!t.canEdit},nativeOn:{click:function(e){return t.changePermissionProject()}}},[t._v("\n        "+t._s(t.user.isOwner?"write project":t.hasWritePermissionProject?"write project":"read project")+"\n      ")]),s("v-btn",{attrs:{block:"",flat:"",small:"",disabled:!t.canEdit},nativeOn:{click:function(e){return t.removeUser()}}},[t._v("\n        remove user\n      ")])],1)],1)],1):t._e()},h=[],v=(s("6762"),s("2fdb"),{name:"UserPermissionProjectCard",props:{project:Object,user:Object,globalDisabled:Boolean},computed:{canEdit:function(){return console.log(!this.user.archived),(this.user.surname.includes("(that is you!)")||!this.globalDisabled||"admin"===this.$store.state.user.role)&&!this.user.archived},hasWritePermissionStreams:function(){return this.project.permissions.canWrite.indexOf(this.user._id)>-1},hasWritePermissionProject:function(){return this.project.canWrite.indexOf(this.user._id)>-1}},data:function(){return{}},methods:{changePermissionStreams:function(){this.$emit("change-permission-streams",this.user._id)},changePermissionProject:function(){this.$emit("change-permission-project",this.user._id)},removeUser:function(){this.$emit("remove-user",this.user._id)}}}),f=v,_=(s("b889"),s("2877")),j=Object(_["a"])(f,m,h,!1,null,"76f85cce",null);j.options.__file="UserPermissionProjectCard.vue";var b=j.exports,g={name:"PermissionTable",components:{UserPermCard:b},props:{project:Object,globalDisabled:{type:Boolean,default:!1}},computed:{canReadProject:function(){return this.project.canRead},canWriteProject:function(){return this.project.canWrite},canReadStreams:function(){return this.project.permissions.canRead},canWriteStreams:function(){return this.project.permissions.canWrite},allUsers:function(){return l()([].concat(Object(i["a"])(this.canReadProject),Object(i["a"])(this.canWriteProject),Object(i["a"])(this.canReadStreams),Object(i["a"])(this.canWriteProject),[this.project.owner]))},allUsersPop:function(){var t=this;return 0===this.allUsers.length?[]:this.allUsers.map(function(e){var s=t.$store.state.users.find(function(t){return t._id===e});return s||t.$store.dispatch("getUser",{_id:e}),s&&(s.isOwner=s._id===t.project.owner),s})}},data:function(){return{}},methods:{hasWritePermissionStreams:function(t){return this.canWriteStreams.indexOf(t)>-1},hasWritePermissionProject:function(t){return this.canWriteProject.indexOf(t)>-1},changePermissionProject:function(t){var e=this.project.canWrite.indexOf(t)>-1,s=[],r=[],a=this.project.permissions.canWrite,n=this.project.permissions.canRead;e?(s=this.project.canWrite.filter(function(e){return e!==t}),r=l()([].concat(Object(i["a"])(this.project.canRead),[t]))):(r=this.project.canRead,s=l()([].concat(Object(i["a"])(this.project.canWrite),[t])),a=l()([].concat(Object(i["a"])(a),[t])),this.upgradeUser(t)),this.$store.dispatch("updateProject",{_id:this.project._id,permissions:{canRead:n,canWrite:a},canRead:r,canWrite:s})},changePermissionStreams:function(t){var e=this.project.permissions.canWrite.indexOf(t)>-1;e?this.downgradeUser(t):this.upgradeUser(t)},upgradeUser:function(t){this.$store.dispatch("upgradeUserInProject",{projectId:this.project._id,userId:t})},downgradeUser:function(t){this.$store.dispatch("downgradeUserInProject",{projectId:this.project._id,userId:t})},removeUser:function(t){this.$store.dispatch("removeUserInProject",{projectId:this.project._id,userId:t})}},mounted:function(){}},x=g,S=(s("1b39"),Object(_["a"])(x,u,p,!1,null,"08034cf3",null));S.options.__file="PermissionTableProject.vue";var P=S.exports,w=s("8450"),$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"elevation-0"},[t.canEdit?s("stream-search",{attrs:{"streams-to-omit":t.streams,"write-only":""},on:{"selected-stream":t.selectStream}}):t._e(),0===t.streams.length?s("v-card-text",{staticClass:"md-layout-item md-size-100"},[s("p",[t._v("This project has no streams. Add some using the form above!")])]):s("v-card-text",{staticClass:"pa-0"},[s("v-list",{attrs:{"two-line":""}},t._l(t.populatedStreams,function(e){return s("v-list-tile",{key:e.streamId},[s("v-list-tile-content",[s("v-list-tile-title",[s("span",{staticClass:"caption"},[s("v-icon",{attrs:{small:""}},[t._v("fingerprint")]),t._v(" "+t._s(e.streamId)+"\n               "),s("v-icon",{attrs:{small:""}},[t._v(t._s(e.private?"lock":"lock_open"))])],1),t._v(" \n            "),s("span",{staticClass:"text-capitalize"},[t._v(t._s(e.name))]),t._v(" "),s("router-link",{attrs:{to:"/streams/"+e.streamId}},[s("v-icon",{attrs:{small:""}},[t._v("open_in_new")])],1)],1),s("v-list-tile-sub-title",{staticClass:"xxx-font-weight-thin caption"},[t._v("\n            last changed "),s("timeago",{attrs:{datetime:e.updatedAt}}),t._v(", created on "+t._s(new Date(e.createdAt).toLocaleString())+"\n          ")],1)],1),s("v-list-tile-action",[s("v-btn",{attrs:{disabled:!t.canEdit,small:"",icon:""},nativeOn:{click:function(s){return s.stopPropagation(),t.removeStream(e.streamId)}}},[s("v-icon",[t._v("close")])],1)],1)],1)}),1)],1)],1)},O=[],y=s("f7fe"),C=s.n(y),I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.stream?s("md-card",{staticClass:"md-elevation-0",staticStyle:{"margin-bottom":"5px"}},[s("md-card-content",{staticClass:"md-layout md-gutter md-alignment-center-left"},[s("div",{staticClass:"md-layout-item md-size-30"},[s("router-link",{attrs:{to:"/streams/"+t.stream.streamId}},[t._v(t._s(t.stream.name))])],1),s("div",{staticClass:"md-layout-item md-caption"},[t.stream.commitMessage?s("span",[t._v(" "+t._s(t.stream.commitMessage))]):t._e()]),s("div",{staticClass:"md-layout-item md-caption text-right"},[t._v("\n      "+t._s(t.stream.streamId)+" | last update "),s("strong",[s("timeago",{attrs:{datetime:t.stream.updatedAt}})],1)]),t.removable?s("div",{staticClass:"md-layout-item text-right"},[s("md-button",{staticClass:"md-dense-xxx md-icon-button md-accent",nativeOn:{click:function(e){return t.$emit("remove-stream",t.streamId)}}},[s("md-icon",[t._v("delete")])],1)],1):t._e()])],1):t._e()},U=[],W={name:"StreamCardSmall",props:{streamId:String,removable:{type:Boolean,default:!0}},computed:{stream:function(){var t=this,e=this.$store.state.streams.find(function(e){return e.streamId===t.streamId});return e||this.$store.dispatch("getStream",{streamId:this.streamId}),e}},data:function(){return{}},methods:{}},k=W,D=(s("d732"),Object(_["a"])(k,I,U,!1,null,"45a6e80e",null));D.options.__file="StreamCardSmall.vue";var R=D.exports,E=s("f6dc"),T={name:"ProjectStreams",components:{StreamCardSmall:R,StreamSearch:E["a"]},props:{project:Object},computed:{streams:function(){return this.project.streams?this.project.streams:[]},populatedStreams:function(){var t=this;return this.$store.state.streams.filter(function(e){return-1!==t.streams.indexOf(e.streamId)})},canEdit:function(){return this.project.owner===this.$store.state.user._id||this.project.canWrite.indexOf(this.$store.state.user._id)>-1||"admin"===this.$store.state.user.role}},watch:{},data:function(){return{}},methods:{selectStream:function(t){this.$emit("selected-stream",t)},removeStream:function(t){this.$emit("remove-stream",t)}}},A=T,z=(s("7eb9"),Object(_["a"])(A,$,O,!1,null,"02789966",null));z.options.__file="ProjectDetailStreams.vue";var B=z.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"elevation-0 pa-3"},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"display-1 font-weight-light text-capitalize my-5",attrs:{xs12:""}},[t.canEdit?s("editable-span",{attrs:{text:t.project.name},on:{update:t.updateName}}):s("span",[t._v(t._s(t.project.name))])],1),s("v-flex",{staticClass:"caption",staticStyle:{"line-height":"32px"},attrs:{xs12:""}},[s("v-icon",{attrs:{small:""}},[t._v("person")]),s("span",{staticClass:"caption"},[t._v(t._s(t.project.canRead.length))]),t._v(" \n      "),s("v-icon",{attrs:{small:""}},[t._v("import_export")]),s("span",{staticClass:"caption"},[t._v(t._s(t.project.streams.length))]),t._v(" \n      "),s("v-icon",{attrs:{small:""}},[t._v("fingerprint")]),t._v(" "),s("strong",{staticStyle:{"user-select":"all"}},[t._v(t._s(t.project._id))]),t._v(" \n      "),s("v-icon",{attrs:{small:""}},[t._v("access_time")]),t._v(" "),s("timeago",{attrs:{datetime:t.project.updatedAt}}),t._v(" \n      "),s("span",{staticClass:"caption font-weight-light text-uppercase"},[t._v("Owned by "),s("strong",[t._v(t._s(t.owner))])])],1),s("v-flex",{staticClass:"ma-0 pa-0 mb-2",attrs:{xs12:""}},[s("v-combobox",{attrs:{"menu-props":{maxHeight:0,zIndex:"0"},"md-disabled":"!canEdit",items:t.project.tags,hint:"add or remove tags",solo:"","persistent-hint":"","small-chips":"","deletable-chips":"",multiple:"",tags:""},on:{input:t.updateTags},scopedSlots:t._u([{key:"no-data",fn:function(){return[t._v("project has no tags.")]},proxy:!0}]),model:{value:t.project.tags,callback:function(e){t.$set(t.project,"tags",e)},expression:"project.tags"}})],1)],1)],1)},L=[],M=(s("7f7f"),{name:"HelloWorld",props:{project:Object},computed:{canEdit:function(){return this.project.owner===this.$store.state.user._id||this.project.canWrite.indexOf(this.$store.state.user._id)>-1},owner:function(){var t=this,e=this.$store.state.users.find(function(e){return e._id===t.project.owner});return e||this.$store.dispatch("getUser",{_id:this.project.owner}),e?e.surname.includes("is you")?"you":"".concat(e.name," ").concat(e.surname):"Loading"},canReadProject:function(){return this.project.canRead},canWriteProject:function(){return this.project.canWrite},canReadStreams:function(){return this.project.permissions.canRead},canWriteStreams:function(){return this.project.permissions.canWrite},allUsers:function(){return l()([].concat(Object(i["a"])(this.canReadProject),Object(i["a"])(this.canWriteProject),Object(i["a"])(this.canReadStreams),Object(i["a"])(this.canWriteProject),[this.project.owner]))}},data:function(){return{}},methods:{updateName:function(t){this.$store.dispatch("updateProject",{_id:this.project._id,name:t.text})},updateTags:C()(function(t){this.$store.dispatch("updateProject",{_id:this.project._id,tags:this.project.tags})},1e3)}}),N=M,F=(s("7d8d"),Object(_["a"])(N,H,L,!1,null,"3f5dd573",null));F.options.__file="ProjectDetailTitle.vue";var J=F.exports,V={name:"ProjectDetailView",components:{UserSearch:d["a"],PermissionTable:P,DetailDescription:w["a"],ProjectDetailStreams:B,ProjectDetailTitle:J},props:{},computed:{canEdit:function(){return this.project.owner===this.$store.state.user._id||this.project.canWrite.indexOf(this.$store.state.user._id)>-1||"admin"===this.$store.state.user.role},project:function(){var t=this;return this.$store.state.projects.find(function(e){return e._id===t.$route.params.projectId})},canReadProject:function(){return this.project.canRead},canWriteProject:function(){return this.project.canWrite},canReadStreams:function(){return this.project.permissions.canRead},canWriteStreams:function(){return this.project.permissions.canWrite},allUsers:function(){return l()([].concat(Object(i["a"])(this.canReadProject),Object(i["a"])(this.canWriteProject),Object(i["a"])(this.canReadStreams),Object(i["a"])(this.canWriteProject),[this.project.owner]))}},data:function(){return{}},methods:{restore:function(){this.$store.dispatch("updateProject",{_id:this.project._id,deleted:!1})},addUserToTeam:function(t){this.$store.dispatch("addUserToProject",{projectId:this.project._id,userId:t})},addStream:function(t){this.$store.dispatch("addStreamToProject",{projectId:this.project._id,streamId:t})},removeStream:function(t){this.$store.dispatch("removeStreamFromProject",{projectId:this.project._id,streamId:t})}},mounted:function(){var t=this,e=this.$store.state.projects.find(function(e){return e._id===t.$route.params.projectId});e?(this.$store.dispatch("getUser",{_id:e.owner}),o()(e.canRead,e.canWrite).forEach(function(e){return t.$store.dispatch("getUser",{_id:e})})):this.$store.dispatch("getProject",{_id:this.$route.params.projectId}).then(function(e){t.$store.dispatch("getUser",{_id:e.data.resource.owner}),o()(e.data.resource.canRead,e.data.resource.canWrite).forEach(function(e){return t.$store.dispatch("getUser",{_id:e})})}).catch(function(e){t.$store.state.isAuth?(t.$router.push("/projects"),console.log("you don't have permission.")):(console.log("should redirect to login"),t.$router.push("/login")),console.log(e)})}},q=V,G=(s("e1ea"),Object(_["a"])(q,r,a,!1,null,"6dcb971b",null));G.options.__file="Project.vue";e["default"]=G.exports},"1b39":function(t,e,s){"use strict";var r=s("2fdb6"),a=s.n(r);a.a},"2b31":function(t,e,s){},"2fdb6":function(t,e,s){},"3c97":function(t,e,s){"use strict";var r=s("b870"),a=s.n(r);a.a},"590b":function(t,e,s){},6166:function(t,e,s){},"6ec6":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{"align-center":"",row:"",wrap:""}},[s("v-flex",{staticClass:"pb-0",attrs:{xs12:""}},[s("v-text-field",{attrs:{box:"",label:"search for users",clearable:"",flat:"",loading:t.searchInProgress,"prepend-inner-icon":"search"},on:{input:t.startSearchUsers},model:{value:t.userSearch,callback:function(e){t.userSearch=e},expression:"userSearch"}})],1),null!==t.userSearch&&t.foundUsers.length>0?s("v-flex",{staticClass:"mb-5",staticStyle:{"margin-top":"-30px"},attrs:{xs12:""}},[s("v-card",{staticClass:"elevation-10"},[t.userSearch?s("v-card-title",{staticClass:"subheading"},[t._v("Search results ("+t._s(t.foundUsers.length)+" users)")]):t._e(),s("v-divider"),t.foundUsers.length>0?s("v-card-text",{staticStyle:{"max-height":"410px","overflow-y":"auto","overflow-x":"hidden"}},[s("v-list",{attrs:{"two-line":"","xxxv-if":"filters.length > 0"}},t._l(t.foundUsers,function(e){return s("v-list-tile",{key:e._id},[s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n                "+t._s(e.name)+" "+t._s(e.surname)+"\n              ")]),s("v-list-tile-sub-title",{staticClass:"caption"},[s("span",{staticClass:"caption"},[t._v(t._s(e.company))])])],1),s("v-list-tile-action",[s("v-btn",{attrs:{fab:"",small:"",depressed:""},nativeOn:{click:function(s){return t.selectUser(e._id)}}},[s("v-icon",[t._v("add")])],1)],1)],1)}),1)],1):t._e()],1)],1):t._e()],1)},a=[],i=(s("20d6"),s("f7fe")),n=s.n(i),o=s("bc3a"),c=s.n(o),l={name:"UserSearch",props:{msg:String},data:function(){return{userSearch:"",foundUsers:[],searchInProgress:!1}},watch:{userSearch:function(t,e){""===t&&(this.foundUsers=[],this.searchInProgress=!1)}},methods:{selectUser:function(t){this.$emit("selected-user",t);var e=this.foundUsers.findIndex(function(e){return e._id===t});this.foundUsers.splice(e,1)},startSearchUsers:function(){this.searchInProgress=!0,this.searchUsers(this.userSearch)},searchUsers:n()(function(t){var e=this;if(""===t||null===t)return this.foundUsers=[],void(this.searchInProgress=!1);t.length<3||c.a.post("/accounts/search",{searchString:t}).then(function(t){console.log(t),e.foundUsers=t.data.resources,t.data.resources.length>0&&e.$store.commit("ADD_USERS",t.data.resources),e.searchInProgress=!1}).catch(function(t){e.foundUsers=[],e.searchInProgress=!1})},1500)}},d=l,u=(s("d57a"),s("2877")),p=Object(u["a"])(d,r,a,!1,null,"174f9bea",null);p.options.__file="UserSearch.vue";e["a"]=p.exports},"7d8d":function(t,e,s){"use strict";var r=s("2b31"),a=s.n(r);a.a},"7eb9":function(t,e,s){"use strict";var r=s("f94c"),a=s.n(r);a.a},8450:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.resource?s("v-card",{staticClass:"elevation-0"},[s("v-toolbar",{staticClass:"elevation-0 transparent"},[s("v-icon",{attrs:{left:"",small:""}},[t._v("book")]),s("span",{staticClass:"title font-weight-light"},[t._v(t._s(t.title)+" Description")]),s("v-spacer"),s("v-toolbar-items",[!1===t.editDescription&&t.canEdit?s("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(e){t.editDescription=!0}}},[t._v("Edit")]):t._e(),!0===t.editDescription?s("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(e){return t.updateDescription(e)}}},[t._v("Done")]):t._e()],1)],1),s("v-divider"),s("v-card-text",[s("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.editDescription,expression:"!editDescription"}]},[s("v-flex",{attrs:{xs12:""},domProps:{innerHTML:t._s(t.compiledDescription)}})],1),s("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.editDescription,expression:"editDescription"}],attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"caption",attrs:{xs12:""}},[t._v("\n        Supports "),s("a",{attrs:{target:"_blank",href:"https://en.wikipedia.org/wiki/Markdown#Example"}},[t._v("markdown:")]),s("strong",[t._v(" ** bold **")]),t._v(", "),s("i",[t._v("* italic *")]),t._v(", "),s("code",[t._v("# Heading 1")]),t._v(", "),s("code",[t._v("## Heading 2")]),t._v(", "),s("code",[t._v("[links](http://example.com)")]),t._v(", etc.\n      ")]),s("v-flex",{attrs:{xs12:""}},[s("v-textarea",{attrs:{box:"",rows:"15"},model:{value:t.resource.description,callback:function(e){t.$set(t.resource,"description",e)},expression:"resource.description"}})],1)],1)],1),t.isStream?s("v-toolbar",{staticClass:"elevation-0 transparent",attrs:{transparent:"",dense:""}},[s("v-icon",{attrs:{left:"",small:""}},[t._v("power_input")]),s("span",{staticClass:"title font-weight-light"},[t._v("Units")])],1):t._e(),s("v-divider"),t.resource.baseProperties?s("v-card-text",{staticClass:"md-caption"},[s("span",[s("strong",[t._v("Units:")]),t._v(" "+t._s(t.resource.baseProperties.units))]),t._v(";\n    "),s("span",[s("strong",[t._v("Tolerance:")]),t._v(" "+t._s(t.resource.baseProperties.tolerance))]),t._v(".\n  ")]):t._e()],1):t._e()},a=[],i=(s("f7fe"),s("0e54")),n=s.n(i),o={name:"DetailDescription",props:{resource:Object},computed:{title:function(){return this.isStream?"Stream":this.isProcessor?"Processor":"Project"},compiledDescription:function(){return n()(this.resource.description,{sanitize:!0})},canEdit:function(){return!!this.isOwner||-1!==this.resource.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.resource.owner===this.$store.state.user._id},isStream:function(){return this.resource.hasOwnProperty("streamId")},isProcessor:function(){return this.resource.hasOwnProperty("blocks")}},data:function(){return{editDescription:!1}},methods:{updateDescription:function(){this.editDescription=!1,this.isStream?this.$store.dispatch("updateStream",{streamId:this.resource.streamId,description:this.resource.description}):this.isProcessor?this.$store.dispatch("updateProcessor",{_id:this.resource._id,description:this.resource.description}):this.$store.dispatch("updateProject",{_id:this.resource._id,description:this.resource.description})}}},c=o,l=(s("3c97"),s("2877")),d=Object(l["a"])(c,r,a,!1,null,"14a82606",null);d.options.__file="DetailDescription.vue";e["a"]=d.exports},"96ed":function(t,e,s){"use strict";var r=s("590b"),a=s.n(r);a.a},"9bb7":function(t,e,s){},a53e:function(t,e,s){},b797:function(t,e,s){},b870:function(t,e,s){},b889:function(t,e,s){"use strict";var r=s("b797"),a=s.n(r);a.a},d57a:function(t,e,s){"use strict";var r=s("6166"),a=s.n(r);a.a},d732:function(t,e,s){"use strict";var r=s("a53e"),a=s.n(r);a.a},e1ea:function(t,e,s){"use strict";var r=s("9bb7"),a=s.n(r);a.a},f6dc:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{"align-center":"",row:"",wrap:""},on:{mouseleave:t.mouseLeave}},[s("v-flex",{staticClass:"pb-0",attrs:{xs12:""}},[s("v-text-field",{ref:"searchField",attrs:{autofocus:"",box:"",flat:"",clearable:"","prepend-inner-icon":"search",label:"search for streams",spellcheck:"false",disabled:t.globalDisabled,loading:t.searchInProgress,"append-icon":"refresh"},on:{input:t.updateSearch,"click:append":function(e){return t.$store.dispatch("getStreams","omit=objects,layers&isComputedResult=false&sort=updatedAt")}},model:{value:t.searchfilter,callback:function(e){t.searchfilter=e},expression:"searchfilter"}})],1),t.showSearchResults?s("v-flex",{staticClass:"mb-5",staticStyle:{"margin-top":"-30px"},attrs:{xs12:""}},[s("v-card",{staticClass:"elevation-10"},[s("v-card-title",{staticClass:"subheading"},[t._v("Search results ("+t._s(t.paginatedStreams.length)+" streams)")]),s("v-divider"),t.paginatedStreams.length>0?s("v-card-text",{staticStyle:{"max-height":"410px","overflow-y":"auto","overflow-x":"hidden"}},[t.filters.length>0?s("v-list",{attrs:{"two-line":""}},t._l(t.paginatedStreams,function(e){return s("v-list-tile",{key:e.streamId},[s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n                "+t._s(e.name)+"\n              ")]),s("v-list-tile-sub-title",{staticClass:"caption"},[s("v-icon",{attrs:{small:""}},[t._v("fingerprint")]),s("span",{staticClass:"caption",staticStyle:{"user-select":"all"}},[t._v(t._s(e.streamId))]),t._v(" "),s("v-icon",{attrs:{small:""}},[t._v("edit")]),s("timeago",{attrs:{datetime:e.updatedAt}})],1)],1),s("v-list-tile-action",[s("v-btn",{attrs:{fab:"",small:"",depressed:""},nativeOn:{click:function(s){return t.selectStream(e.streamId)}}},[s("v-icon",[t._v("add")])],1)],1)],1)}),1):t._e()],1):t._e()],1)],1):t._e()],1)},a=[],i=(s("6762"),s("2fdb"),s("28a5"),s("f7fe")),n=s.n(i),o={name:"StreamSearch",props:{streamsToOmit:{type:Array,default:function(){return[]}},globalDisabled:{type:Boolean,default:!1},writeOnly:Boolean},computed:{filteredStreams:function(){var t=this;return this.$store.getters.filteredStreams(this.filters).filter(function(e){return-1===t.streamsToOmit.indexOf(e.streamId)})},paginatedStreams:function(){var t=this,e=this.filteredStreams.slice(this.startIndex,this.endIndex);return this.writeOnly&&(e=e.filter(function(e){return e.owner===t.$store.state.user._id||e.canWrite.indexOf(t.$store.state.user._id)>-1})),e}},watch:{searchfilter:function(t){""===t||null===t?(this.showSearchResults=!1,this.searchInProgress=!1):this.searchInProgress=!0}},data:function(){return{searchfilter:"",filters:[],showSearchResults:!1,searchInProgress:!1,startIndex:0,endIndex:42}},methods:{mouseLeave:function(){this.$refs.searchField.blur()},refreshStreams:function(){this.$store.dispatch("getStreams","omit=objects,layers&isComputedResult=false&sort=updatedAt")},selectStream:function(t){this.$emit("selected-stream",t)},updateSearch:n()(function(t){if(this.searchfilter=t,""!==t&&null!==t){this.showSearchResults=!0,this.searchInProgress=!1;try{var e=this.searchfilter.split(" ").map(function(t){return t.includes(":")?{key:t.split(":")[0],value:t.split(":")[1]}:t.includes("public")||t.includes("private")||t.includes("mine")||t.includes("shared")?{key:t,value:null}:{key:"name",value:t}});this.filters=e}catch(s){this.filters=[{key:"name",value:t}]}}else this.showSearchResults=!1},1e3)}},c=o,l=(s("96ed"),s("2877")),d=Object(l["a"])(c,r,a,!1,null,"26c67241",null);d.options.__file="StreamSearch.vue";e["a"]=d.exports},f94c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1fd5777f.493eb8e4.js.map
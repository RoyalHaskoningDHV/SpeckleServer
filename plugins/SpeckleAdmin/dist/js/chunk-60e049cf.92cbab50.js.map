{"version":3,"sources":["webpack:///./src/views/Project.vue?1c98","webpack:///./src/components/PermissionTableProject.vue?68e9","webpack:///./src/components/UserPermissionProjectCard.vue?6967","webpack:///src/components/UserPermissionProjectCard.vue","webpack:///./src/components/UserPermissionProjectCard.vue?5531","webpack:///./src/components/UserPermissionProjectCard.vue","webpack:///src/components/PermissionTableProject.vue","webpack:///./src/components/PermissionTableProject.vue?8702","webpack:///./src/components/PermissionTableProject.vue","webpack:///./src/components/ProjectDetailStreams.vue?eab8","webpack:///./src/components/StreamCardSmall.vue?57c2","webpack:///src/components/StreamCardSmall.vue","webpack:///./src/components/StreamCardSmall.vue?571f","webpack:///./src/components/StreamCardSmall.vue","webpack:///src/components/ProjectDetailStreams.vue","webpack:///./src/components/ProjectDetailStreams.vue?ef7c","webpack:///./src/components/ProjectDetailStreams.vue","webpack:///./src/components/ProjectDetailTitle.vue?a44a","webpack:///src/components/ProjectDetailTitle.vue","webpack:///./src/components/ProjectDetailTitle.vue?843b","webpack:///./src/components/ProjectDetailTitle.vue","webpack:///src/views/Project.vue","webpack:///./src/views/Project.vue?b960","webpack:///./src/views/Project.vue","webpack:///./src/components/ProjectDetailTitle.vue?801f","webpack:///./src/components/PermissionTableProject.vue?bf0a","webpack:///./src/views/Project.vue?a088","webpack:///./src/components/UserSearch.vue?08ae","webpack:///src/components/UserSearch.vue","webpack:///./src/components/UserSearch.vue?29b2","webpack:///./src/components/UserSearch.vue","webpack:///./src/components/DetailDescription.vue?bdec","webpack:///src/components/DetailDescription.vue","webpack:///./src/components/DetailDescription.vue?7229","webpack:///./src/components/DetailDescription.vue","webpack:///./src/components/UserPermissionProjectCard.vue?f6a1","webpack:///./src/components/StreamSearch.vue?6348","webpack:///./src/components/UserSearch.vue?38a5","webpack:///./src/components/StreamSearch.vue?ec1b","webpack:///src/components/StreamSearch.vue","webpack:///./src/components/StreamSearch.vue?c958","webpack:///./src/components/StreamSearch.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","project","_v","nativeOn","$event","restore","_e","staticClass","on","addUserToTeam","canEdit","addStream","removeStream","staticRenderFns","allUsersPop","length","_l","user","key","_id","globalDisabled","changePermissionStreams","changePermissionProject","removeUser","class","disabled","archived","_s","name","surname","model","value","callback","$$v","writeStreams","expression","writeProject","props","Object","Boolean","computed","console","log","hasWritePermissionStreams","permissions","canWrite","indexOf","hasWritePermissionProject","data","methods","$emit","mounted","component","components","UserPermCard","type","default","owner","$store","state","canReadProject","canWriteProject","canReadStreams","canWriteStreams","allUsers","map","u","localCanWrite","filter","localCanRead","canRead","streamCanWrite","upgradeUser","dispatch","downgradeUser","streams","selectStream","stream","streamId","private","updatedAt","Date","createdAt","toLocaleString","stopPropagation","staticStyle","commitMessage","String","removable","StreamCardSmall","StreamSearch","populatedStreams","watch","$router","push","allProjectStreams","updateName","updateJobNumber","$set","allTags","updateTags","scopedSlots","_u","fn","proxy","join","getters","includes","UserSearch","PermissionTable","DetailDescription","ProjectDetailStreams","ProjectDetailTitle","projects","find","searchInProgress","startSearchUsers","userSearch","foundUsers","company","selectUser","msg","splice","searchUsers","title","editDescription","updateDescription","directives","rawName","domProps","compiledDescription","resource","baseProperties","units","tolerance","isOwner","isStream","hasOwnProperty","isProcessor","mouseLeave","ref","updateSearch","searchfilter","paginatedStreams","filters","streamsToOmit","Array","writeOnly","filteredStreams","filteredResources","toReturn","showSearchResults","startIndex","endIndex","$refs","searchField","blur","refreshStreams","e"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAW,QAAEI,EAAG,cAAc,CAACE,MAAM,CAAC,eAAe,KAAK,CAAEN,EAAIO,QAAe,QAAEH,EAAG,YAAY,CAACE,MAAM,CAAC,SAAW,KAAK,CAACF,EAAG,OAAO,CAACJ,EAAIQ,GAAG,wCAAwCJ,EAAG,YAAaJ,EAAW,QAAEI,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,WAAWG,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,QAAQD,MAAW,CAACV,EAAIQ,GAAG,gBAAgBR,EAAIY,MAAM,GAAGZ,EAAIY,KAAKR,EAAG,WAAW,CAACS,YAAY,OAAOP,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,uBAAuB,CAACE,MAAM,CAAC,QAAUN,EAAIO,YAAY,GAAGH,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,qBAAqB,CAACE,MAAM,CAAC,SAAWN,EAAIO,YAAY,GAAGH,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,KAAO,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,eAAe,CAACT,EAAG,eAAe,CAACS,YAAY,2BAA2B,CAACT,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,GAAG,KAAO,KAAK,CAACN,EAAIQ,GAAG,wBAAwBR,EAAIQ,GAAG,iCAAiC,GAAGJ,EAAG,cAAc,CAAEJ,EAAW,QAAEI,EAAG,cAAc,CAACU,GAAG,CAAC,gBAAgBd,EAAIe,iBAAiBf,EAAIY,KAAKR,EAAG,mBAAmB,CAACE,MAAM,CAAC,QAAUN,EAAIO,QAAQ,mBAAmBP,EAAIgB,SAASF,GAAG,CAAC,cAAc,SAASJ,KAAU,YAAY,SAASA,SAAc,IAAI,IAAI,GAAGN,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,KAAO,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,eAAe,CAACT,EAAG,eAAe,CAACS,YAAY,2BAA2B,CAACT,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,GAAG,KAAO,KAAK,CAACN,EAAIQ,GAAG,mBAAmBR,EAAIQ,GAAG,mCAAmC,GAAGJ,EAAG,cAAc,CAACA,EAAG,yBAAyB,CAACE,MAAM,CAAC,QAAUN,EAAIO,SAASO,GAAG,CAAC,kBAAkBd,EAAIiB,UAAU,gBAAgBjB,EAAIkB,iBAAiB,IAAI,IAAI,IAAI,IAAI,GAAGlB,EAAIY,MACnpDO,EAAkB,G,0FCDlB,EAAS,WAAa,IAAInB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIoB,YAAYC,OAAS,GAAKrB,EAAIO,QAASH,EAAG,cAAc,CAACS,YAAY,YAAYP,MAAM,CAAC,eAAe,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,CAAGN,EAAIgB,QAA4FhB,EAAIY,KAAvFR,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIQ,GAAG,2CAAoDR,EAAIsB,GAAItB,EAAe,YAAE,SAASuB,GAAM,OAAO,EAAOnB,EAAG,SAAS,CAACoB,IAAID,EAAKE,IAAInB,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAOiB,EAAK,QAAUvB,EAAIO,QAAQ,kBAAkBP,EAAI0B,gBAAgBZ,GAAG,CAAC,4BAA4Bd,EAAI2B,wBAAwB,4BAA4B3B,EAAI4B,wBAAwB,cAAc5B,EAAI6B,eAAe,GAAG7B,EAAIY,QAAQ,IAAI,GAAGZ,EAAIY,MAC5tB,EAAkB,GCDlB,EAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAQ,KAAEI,EAAG,SAAS,CAACS,YAAY,2BAA2BiB,MAAM,CAAEC,SAAU/B,EAAIuB,KAAKS,UAAW1B,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,wBAAwB,GAAG,eAAe,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,IAAI,CAACJ,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAIuB,KAAKW,MAAM,IAAIlC,EAAIiC,GAAGjC,EAAIuB,KAAKY,cAAc/B,EAAG,SAAS,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,eAAe,UAAYN,EAAIgB,SAASP,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI2B,4BAA4BS,MAAM,CAACC,MAAOrC,EAAgB,aAAEsC,SAAS,SAAUC,GAAMvC,EAAIwC,aAAaD,GAAKE,WAAW,mBAAmB,GAAGrC,EAAG,SAAS,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,eAAe,UAAYN,EAAIgB,SAASP,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI4B,4BAA4BQ,MAAM,CAACC,MAAOrC,EAAgB,aAAEsC,SAAS,SAAUC,GAAMvC,EAAI0C,aAAaH,GAAKE,WAAW,mBAAmB,GAAGrC,EAAG,SAAS,CAACS,YAAY,iBAAiB,CAACT,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,UAAYN,EAAIgB,SAASP,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI6B,gBAAgB,CAACzB,EAAG,SAAS,CAACJ,EAAIQ,GAAG,YAAY,IAAI,IAAI,IAAI,GAAGR,EAAIY,MACroC,EAAkB,GCkBtB,G,oBAAA,CACEsB,KAAM,4BACNS,MAAO,CACLpC,QAASqC,OACTrB,KAAMqB,OACNlB,eAAgBmB,SAElBC,SAAU,CACR9B,QADJ,WAGM,OADA+B,QAAQC,KAAd,qBACc,KAAd,4HAEIC,0BALJ,WAMM,OAAOhD,KAAKM,QAAQ2C,YAAYC,SAASC,QAAQ,KAAvD,cAEIC,0BARJ,WASM,OAAOpD,KAAKM,QAAQ4C,SAASC,QAAQ,KAA3C,eAGEE,KAnBF,WAoBI,MAAO,CACLd,cAAc,EACdE,cAAc,IAGlBa,QAAS,CACP5B,wBADJ,WAEM1B,KAAKuD,MAAM,4BAAjB,gBAEI5B,wBAJJ,WAKM3B,KAAKuD,MAAM,4BAAjB,gBAEI3B,WAPJ,WAQM5B,KAAKuD,MAAM,cAAjB,iBAGEC,QApCF,WAqCIxD,KAAKuC,aAAevC,KAAKgD,0BACzBhD,KAAKyC,aAAezC,KAAKoD,6BCzDsU,I,wBCQ/VK,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCCf,GACExB,KAAM,kBACNyB,WAAY,CACVC,aAAJ,GAEEjB,MAAO,CACLpC,QAASqC,OACTlB,eAAgB,CACdmC,KAAMhB,QACNiB,SAAS,IAGbhB,SAAU,CACR9B,QADJ,WAEM,OAAOf,KAAKM,QAAQwD,QAAU9D,KAAK+D,OAAOC,MAAM1C,KAAKE,KAAOxB,KAAKM,QAAQ4C,SAASC,QAAQ,KAAhG,kEAEIc,eAJJ,WAIA,6BACIC,gBALJ,WAKA,8BACIC,eANJ,WAMA,yCACIC,gBAPJ,WAOA,0CACIC,SARJ,WASM,OAAO,IAAb,oLAEIlD,YAXJ,WAWA,WACM,OAAN,IAAU,KAAV,mBACanB,KAAKqE,SAASC,IAAI,SAA/B,GACQ,IAAR,2DAGQ,OAFR,wCACY,IAAZ,mCACeC,MAIblB,KAjCF,WAkCI,MAAO,IAETC,QAAS,CACPN,0BADJ,SACA,GACM,OAAOhD,KAAKoE,gBAAgBjB,QAAQ,IAA1C,GAEIC,0BAJJ,SAIA,GACM,OAAOpD,KAAKkE,gBAAgBf,QAAQ,IAA1C,GAEIxB,wBAPJ,SAOA,GACM,IAAN,sCACA,KACA,KACA,oCACA,mCAEU,GACF6C,EAAgBxE,KAAKM,QAAQ4C,SAASuB,OAAO,SAArD,kBACQC,EAAe,IAAvB,uDAEQA,EAAe1E,KAAKM,QAAQqE,QAC5BH,EAAgB,IAAxB,sDAEQI,EAAiB,IAAzB,kCACQ5E,KAAK6E,YAAY,IAEnB7E,KAAK+D,OAAOe,SAAS,gBAA3B,iFAEIpD,wBA1BJ,SA0BA,GACM,IAAN,kDACA,EACA,sBADA,qBAGImD,YA/BJ,SA+BA,GACM7E,KAAK+D,OAAOe,SAAS,uBAA3B,wCAEIC,cAlCJ,SAkCA,GACM/E,KAAK+D,OAAOe,SAAS,yBAA3B,wCAEIlD,WArCJ,SAqCA,GACM5B,KAAK+D,OAAOe,SAAS,sBAA3B,yCAGEtB,QA7EF,cCpBgW,ICQ5V,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,oBCnBX,EAAS,WAAa,IAAIzD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACS,YAAY,eAAe,CAAEb,EAAW,QAAEI,EAAG,gBAAgB,CAACE,MAAM,CAAC,kBAAkBN,EAAIiF,QAAQ,aAAa,IAAInE,GAAG,CAAC,kBAAkBd,EAAIkF,gBAAgBlF,EAAIY,KAA6B,IAAvBZ,EAAIiF,QAAQ5D,OAAcjB,EAAG,cAAc,CAACS,YAAY,8BAA8B,CAAEb,EAAW,QAAEI,EAAG,IAAI,CAACJ,EAAIQ,GAAG,iEAAiEJ,EAAG,IAAI,CAACJ,EAAIQ,GAAG,oCAAoCJ,EAAG,cAAc,CAACS,YAAY,QAAQ,CAACT,EAAG,SAAS,CAACE,MAAM,CAAC,WAAW,KAAKN,EAAIsB,GAAItB,EAAoB,iBAAE,SAASmF,GAAQ,OAAO/E,EAAG,cAAc,CAACoB,IAAI2D,EAAOC,UAAU,CAAChF,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACA,EAAG,OAAO,CAACS,YAAY,WAAW,CAACT,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,IAAIR,EAAIiC,GAAGkD,EAAOC,UAAU,qBAAqBhF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAGR,EAAIiC,GAAGkD,EAAOE,QAAU,OAAS,iBAAiB,GAAGrF,EAAIQ,GAAG,mBAAmBJ,EAAG,OAAO,CAACS,YAAY,mBAAmB,CAACb,EAAIQ,GAAGR,EAAIiC,GAAGkD,EAAOjD,SAASlC,EAAIQ,GAAG,KAAKJ,EAAG,cAAc,CAACE,MAAM,CAAC,GAAK,YAAc6E,EAAOC,WAAW,CAAChF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,kBAAkB,IAAI,GAAGJ,EAAG,wBAAwB,CAACS,YAAY,gCAAgC,CAACb,EAAIQ,GAAG,+BAA+BJ,EAAG,UAAU,CAACE,MAAM,CAAC,SAAW6E,EAAOG,aAAatF,EAAIQ,GAAG,gBAAgBR,EAAIiC,GAAG,IAAIsD,KAAMJ,EAAOK,WAAYC,kBAAkB,iBAAiB,IAAI,GAAGrF,EAAG,qBAAqB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,UAAYN,EAAIgB,QAAQ,MAAQ,GAAG,KAAO,IAAIP,SAAS,CAAC,MAAQ,SAASC,GAAiC,OAAzBA,EAAOgF,kBAAyB1F,EAAIkB,aAAaiE,EAAOC,aAAa,CAAChF,EAAG,SAAS,CAACJ,EAAIQ,GAAG,YAAY,IAAI,IAAI,KAAK,IAAI,IAAI,IACvrD,EAAkB,G,qBCDlB,EAAS,WAAa,IAAIR,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAU,OAAEI,EAAG,UAAU,CAACS,YAAY,iBAAiB8E,YAAY,CAAC,gBAAgB,QAAQ,CAACvF,EAAG,kBAAkB,CAACS,YAAY,gDAAgD,CAACT,EAAG,MAAM,CAACS,YAAY,6BAA6B,CAACT,EAAG,cAAc,CAACE,MAAM,CAAC,GAAK,YAAYN,EAAImF,OAAOC,WAAW,CAACpF,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAImF,OAAOjD,UAAU,GAAG9B,EAAG,MAAM,CAACS,YAAY,6BAA6B,CAAEb,EAAImF,OAAoB,cAAE/E,EAAG,OAAO,CAACJ,EAAIQ,GAAG,IAAIR,EAAIiC,GAAGjC,EAAImF,OAAOS,kBAAkB5F,EAAIY,OAAOR,EAAG,MAAM,CAACS,YAAY,wCAAwC,CAACb,EAAIQ,GAAG,WAAWR,EAAIiC,GAAGjC,EAAImF,OAAOC,UAAU,mBAAmBhF,EAAG,SAAS,CAACA,EAAG,UAAU,CAACE,MAAM,CAAC,SAAWN,EAAImF,OAAOG,cAAc,KAAMtF,EAAa,UAAEI,EAAG,MAAM,CAACS,YAAY,6BAA6B,CAACT,EAAG,YAAY,CAACS,YAAY,wCAAwCJ,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIwD,MAAM,gBAAiBxD,EAAIoF,aAAa,CAAChF,EAAG,UAAU,CAACJ,EAAIQ,GAAG,aAAa,IAAI,GAAGR,EAAIY,QAAQ,GAAGZ,EAAIY,MACliC,EAAkB,GCoBtB,GACEsB,KAAM,kBACNS,MAAO,CACLyC,SAAUS,OACVC,UAAW,CACTjC,KAAMhB,QACNiB,SAAS,IAGbhB,SAAU,CACRqC,OADJ,WACA,WACA,8EAEM,OADN,8DACaA,IAGX7B,KAhBF,WAgBA,UACEC,QAAS,ICtC8U,ICOrV,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,oBCmBf,GACErB,KAAM,iBACNyB,WAAY,CACVoC,gBAAJ,EACIC,aAAJ,QAEErD,MAAO,CACLpC,QAASqC,QAEXE,SAAU,CACRmC,QADJ,WACA,qDACIgB,iBAFJ,WAEA,WACM,OAAOhG,KAAK+D,OAAOC,MAAMgB,QAAQP,OAAO,SAA9C,+CAEI1D,QALJ,WAMM,OAAOf,KAAKM,QAAQwD,QAAU9D,KAAK+D,OAAOC,MAAM1C,KAAKE,KAAOxB,KAAKM,QAAQ4C,SAASC,QAAQ,KAAhG,mEAGE8C,MAAO,GACP5C,KAnBF,WAoBI,MAAO,IAETC,QAAS,CACP2B,aADJ,SACA,GAEMjF,KAAKuD,MAAM,kBAAjB,IAEItC,aALJ,SAKA,GAEMjB,KAAKuD,MAAM,gBAAjB,MClE8V,ICO1V,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QClBX,EAAS,WAAa,IAAIxD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACS,YAAY,oBAAoB,CAACT,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,mDAAmDP,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIG,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAImG,QAAQC,KAAM,SAAWpG,EAAIqG,sBAAuB,CAACjG,EAAG,SAAS,CAACJ,EAAIQ,GAAG,UAAU,GAAIR,EAAW,QAAEI,EAAG,gBAAgB,CAACE,MAAM,CAAC,KAAON,EAAIO,QAAQ2B,MAAMpB,GAAG,CAAC,OAASd,EAAIsG,cAAclG,EAAG,OAAO,CAACJ,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAIO,QAAQ2B,UAAU,GAAG9B,EAAG,SAAS,CAACS,YAAY,UAAU8E,YAAY,CAAC,cAAc,QAAQrF,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,YAAYJ,EAAG,OAAO,CAACS,YAAY,WAAW,CAACb,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAIO,QAAQqE,QAAQvD,WAAWrB,EAAIQ,GAAG,aAAaJ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,mBAAmBJ,EAAG,OAAO,CAACS,YAAY,WAAW,CAACb,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAIO,QAAQ0E,QAAQ5D,WAAWrB,EAAIQ,GAAG,aAAaJ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,KAAKJ,EAAG,SAAS,CAACuF,YAAY,CAAC,cAAc,QAAQ,CAAC3F,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAIO,QAAQkB,QAAQzB,EAAIQ,GAAG,aAAaJ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,KAAKJ,EAAG,UAAU,CAACE,MAAM,CAAC,SAAWN,EAAIO,QAAQ+E,aAAatF,EAAIQ,GAAG,aAAaJ,EAAG,OAAO,CAACS,YAAY,4CAA4C,CAACb,EAAIQ,GAAG,aAAaJ,EAAG,SAAS,CAACJ,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAI+D,UAAU/D,EAAIQ,GAAG,SAASR,EAAIiC,GAAGjC,EAAIgB,QAAU,MAAQ,UAAU,aAAa,GAAGZ,EAAG,SAAS,CAACS,YAAY,sBAAsBP,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,eAAe,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,8BAA8B,KAAO,cAAc,KAAO,GAAG,kBAAkB,GAAG,UAAYN,EAAIgB,SAASF,GAAG,CAAC,MAAQd,EAAIuG,iBAAiBnE,MAAM,CAACC,MAAOrC,EAAIO,QAAiB,UAAE+B,SAAS,SAAUC,GAAMvC,EAAIwG,KAAKxG,EAAIO,QAAS,YAAagC,IAAME,WAAW,wBAAwB,GAAGrC,EAAG,SAAS,CAACE,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,aAAa,CAACE,MAAM,CAAC,UAAYN,EAAIgB,QAAQ,MAAQhB,EAAIyG,QAAQ,KAAO,qBAAqB,KAAO,GAAG,kBAAkB,GAAG,cAAc,GAAG,kBAAkB,GAAG,SAAW,GAAG,KAAO,IAAI3F,GAAG,CAAC,MAAQd,EAAI0G,YAAYC,YAAY3G,EAAI4G,GAAG,CAAC,CAACpF,IAAI,UAAUqF,GAAG,WAAW,MAAO,CAAC7G,EAAIQ,GAAG,oBAAoBsG,OAAM,KAAQ1E,MAAM,CAACC,MAAOrC,EAAIO,QAAY,KAAE+B,SAAS,SAAUC,GAAMvC,EAAIwG,KAAKxG,EAAIO,QAAS,OAAQgC,IAAME,WAAW,mBAAmB,IAAI,IAAI,IAAI,IAAI,IAC95E,EAAkB,GCoCtB,G,UAAA,CACEP,KAAM,aACNS,MAAO,CACLpC,QAASqC,QAEXE,SAAU,CACRuD,kBADJ,WAEM,OAAOpG,KAAKM,QAAQ0E,QAAQ8B,KAAK,MAEnCN,QAJJ,WAKM,OAAOxG,KAAK+D,OAAOgD,QAAQP,SAE7BzF,QAPJ,WAQM,OAAOf,KAAKM,QAAQwD,QAAU9D,KAAK+D,OAAOC,MAAM1C,KAAKE,KAAOxB,KAAKM,QAAQ4C,SAASC,QAAQ,KAAhG,2BAEIW,MAVJ,WAUA,WACA,4EAIM,OAHN,GACQ9D,KAAK+D,OAAOe,SAAS,UAA7B,0BAEaP,EAAIA,EAAErC,QAAQ8E,SAAS,UAApC,yDAEI/C,eAjBJ,WAiBA,6BACIC,gBAlBJ,WAkBA,8BACIC,eAnBJ,WAmBA,yCACIC,gBApBJ,WAoBA,0CACIC,SArBJ,WAsBM,OAAO,IAAb,qLAGEhB,KA9BF,WA8BA,UACEC,QAAS,CACP+C,WADJ,SACA,GACMrG,KAAK+D,OAAOe,SAAS,gBAA3B,qCAEI2B,WAAY,IAAhB,YACMzG,KAAK+D,OAAOe,SAAS,gBAA3B,gDACA,KACIwB,gBAAiB,IAArB,YACMtG,KAAK+D,OAAOe,SAAS,gBAA3B,0DACA,QC7E4V,ICQxV,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QC+Bf,GACE7C,KAAM,oBACNyB,WAAY,CACVuD,WAAJ,OACIC,gBAAJ,EACIC,kBAAJ,OACIC,qBAAJ,EACIC,mBAAJ,GAEE3E,MAAO,GACPG,SAAU,CACR9B,QADJ,WAEM,OAAOf,KAAKM,QAAQwD,QAAU9D,KAAK+D,OAAOC,MAAM1C,KAAKE,KAAOxB,KAAKM,QAAQ4C,SAASC,QAAQ,KAAhG,kEAEI7C,QAJJ,WAIA,WACM,OAAON,KAAK+D,OAAOC,MAAMsD,SAASC,KAAK,SAA7C,+CAEItD,eAPJ,WAOA,6BACIC,gBARJ,WAQA,8BACIC,eATJ,WASA,yCACIC,gBAVJ,WAUA,0CACIC,SAXJ,WAYM,OAAO,IAAb,qLAGEhB,KAzBF,WA0BI,MAAO,IAETC,QAAS,CACP5C,QADJ,WAEMV,KAAK+D,OAAOe,SAAS,gBAA3B,oCAEIhE,cAJJ,SAIA,GACMd,KAAK+D,OAAOe,SAAS,mBAA3B,wCAGI9D,UARJ,SAQA,GACMhB,KAAK+D,OAAOe,SAAS,qBAA3B,0CAGI7D,aAZJ,SAYA,GACMjB,KAAK+D,OAAOe,SAAS,0BAA3B,2CAGEtB,QA5CF,WA4CA,WACA,yFACA,GAiBMxD,KAAK+D,OAAOe,SAAS,UAA3B,eACM,IAAN,yFAjBM9E,KAAK+D,OAAOe,SAAS,aAA3B,oCACA,iBACQ,EAAR,2BAAU,IAAV,wBACQ,IAAR,sEAAU,OAAV,yCAEA,kBACA,uBACU,EAAV,0BACU,QAAV,oCAEU,QAAV,gCACU,EAAV,wBAEQ,QAAR,WC9GiV,ICQ7U,G,UAAY,eACd,EACAhF,EACAoB,GACA,EACA,KACA,WACA,OAIa,e,6CCnBf,yBAA8iB,EAAG,G,oCCAjjB,yBAAkjB,EAAG,G,oCCArjB,yBAAmiB,EAAG,G,2GCAtiB,IAAIpB,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,MAAM,CAAC,eAAe,GAAG,IAAM,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,OAAOP,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,IAAM,GAAG,MAAQ,mBAAmB,UAAY,GAAG,KAAO,GAAG,QAAUN,EAAIyH,iBAAiB,qBAAqB,UAAU3G,GAAG,CAAC,MAAQd,EAAI0H,kBAAkBtF,MAAM,CAACC,MAAOrC,EAAc,WAAEsC,SAAS,SAAUC,GAAMvC,EAAI2H,WAAWpF,GAAKE,WAAW,iBAAiB,GAAqB,OAAjBzC,EAAI2H,YAAqB3H,EAAI4H,WAAWvG,OAAS,EAAGjB,EAAG,SAAS,CAACS,YAAY,OAAO8E,YAAY,CAAC,aAAa,SAASrF,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,gBAAgB,CAAEb,EAAc,WAAEI,EAAG,eAAe,CAACS,YAAY,cAAc,CAACb,EAAIQ,GAAG,mBAAmBR,EAAIiC,GAAGjC,EAAI4H,WAAWvG,QAAQ,aAAarB,EAAIY,KAAKR,EAAG,aAAcJ,EAAI4H,WAAWvG,OAAO,EAAGjB,EAAG,cAAc,CAACuF,YAAY,CAAC,aAAa,QAAQ,aAAa,OAAO,aAAa,WAAW,CAACvF,EAAG,SAAS,CAACE,MAAM,CAAC,WAAW,GAAG,UAAU,uBAAuBN,EAAIsB,GAAItB,EAAc,WAAE,SAASuB,GAAM,OAAOnB,EAAG,cAAc,CAACoB,IAAID,EAAKE,KAAK,CAACrB,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACJ,EAAIQ,GAAG,qBAAqBR,EAAIiC,GAAGV,EAAKW,MAAM,IAAIlC,EAAIiC,GAAGV,EAAKY,SAAS,sBAAsB/B,EAAG,wBAAwB,CAACS,YAAY,WAAW,CAACT,EAAG,OAAO,CAACS,YAAY,WAAW,CAACb,EAAIQ,GAAGR,EAAIiC,GAAGV,EAAKsG,eAAe,GAAGzH,EAAG,qBAAqB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,GAAG,MAAQ,GAAG,UAAY,IAAIG,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI8H,WAAWvG,EAAKE,QAAQ,CAACrB,EAAG,SAAS,CAACJ,EAAIQ,GAAG,UAAU,IAAI,IAAI,KAAK,IAAI,GAAGR,EAAIY,MAAM,IAAI,GAAGZ,EAAIY,MAAM,IAC9jDO,EAAkB,G,sDCmCtB,GACEe,KAAM,aACNS,MAAO,CACLoF,IAAKlC,QAEPvC,KALF,WAMI,MAAO,CACLqE,WAAY,GACZC,WAAY,GACZH,kBAAkB,IAGtBvB,MAAO,CACLyB,WADJ,SACA,KACA,KAAU,IACF1H,KAAK2H,WAAa,GAClB3H,KAAKwH,kBAAmB,KAI9BlE,QAAS,CACPuE,WADJ,SACA,GACM7H,KAAKuD,MAAM,gBAAjB,GACM,IAAN,2DACMvD,KAAK2H,WAAWI,OAAO,EAA7B,IAEIN,iBANJ,WAOMzH,KAAKwH,kBAAmB,EACxBxH,KAAKgI,YAAY,KAAvB,aAEIA,YAAa,IAAjB,uBACM,GAAN,KAAU,GAAV,SAGQ,OAFAhI,KAAK2H,WAAa,QAClB3H,KAAKwH,kBAAmB,GAGtB,EAAV,UAIM,EAAN,4CACA,iBACQ,QAAR,OACQ,EAAR,4BAEA,2BACA,8CACQ,EAAR,sBAEA,kBACQ,EAAR,cACQ,EAAR,uBAEA,QCzFoV,I,wBCQhV/D,EAAY,eACd,EACA3D,EACAoB,GACA,EACA,KACA,WACA,MAIa,OAAAuC,E,kECnBf,IAAI3D,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAY,SAAEI,EAAG,SAAS,CAACS,YAAY,eAAe,CAACT,EAAG,YAAY,CAACS,YAAY,2BAA2B,CAACT,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,KAAK,CAACN,EAAIQ,GAAG,UAAUJ,EAAG,OAAO,CAACS,YAAY,2BAA2B,CAACb,EAAIQ,GAAGR,EAAIiC,GAAGjC,EAAIkI,OAAO,kBAAkB9H,EAAG,YAAYA,EAAG,kBAAkB,EAAwB,IAAtBJ,EAAImI,iBAA2BnI,EAAIgB,QAASZ,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,WAAWG,SAAS,CAAC,MAAQ,SAASC,GAAQV,EAAImI,iBAAgB,KAAQ,CAACnI,EAAIQ,GAAG,UAAUR,EAAIY,MAA4B,IAAtBZ,EAAImI,gBAAwB/H,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,WAAWG,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIoI,kBAAkB1H,MAAW,CAACV,EAAIQ,GAAG,UAAUR,EAAIY,MAAM,IAAI,GAAGR,EAAG,aAAaA,EAAG,cAAc,CAACA,EAAG,WAAW,CAACiI,WAAW,CAAC,CAACnG,KAAK,OAAOoG,QAAQ,SAASjG,OAAQrC,EAAImI,gBAAiB1F,WAAW,sBAAsB,CAACrC,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,IAAIiI,SAAS,CAAC,UAAYvI,EAAIiC,GAAGjC,EAAIwI,yBAAyB,GAAGpI,EAAG,WAAW,CAACiI,WAAW,CAAC,CAACnG,KAAK,OAAOoG,QAAQ,SAASjG,MAAOrC,EAAmB,gBAAEyC,WAAW,oBAAoBnC,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,UAAUP,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIQ,GAAG,uBAAuBJ,EAAG,IAAI,CAACE,MAAM,CAAC,OAAS,SAAS,KAAO,mDAAmD,CAACN,EAAIQ,GAAG,eAAeJ,EAAG,SAAS,CAACJ,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,MAAMJ,EAAG,IAAI,CAACJ,EAAIQ,GAAG,gBAAgBR,EAAIQ,GAAG,MAAMJ,EAAG,OAAO,CAACJ,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,MAAMJ,EAAG,OAAO,CAACJ,EAAIQ,GAAG,kBAAkBR,EAAIQ,GAAG,MAAMJ,EAAG,OAAO,CAACJ,EAAIQ,GAAG,iCAAiCR,EAAIQ,GAAG,oBAAoBJ,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,aAAa,CAACE,MAAM,CAAC,IAAM,GAAG,KAAO,MAAM8B,MAAM,CAACC,MAAOrC,EAAIyI,SAAoB,YAAEnG,SAAS,SAAUC,GAAMvC,EAAIwG,KAAKxG,EAAIyI,SAAU,cAAelG,IAAME,WAAW,2BAA2B,IAAI,IAAI,GAAIzC,EAAY,SAAEI,EAAG,YAAY,CAACS,YAAY,0BAA0BP,MAAM,CAAC,YAAc,GAAG,MAAQ,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,KAAK,CAACN,EAAIQ,GAAG,iBAAiBJ,EAAG,OAAO,CAACS,YAAY,2BAA2B,CAACb,EAAIQ,GAAG,YAAY,GAAGR,EAAIY,KAAKR,EAAG,aAAcJ,EAAIyI,SAAuB,eAAErI,EAAG,cAAc,CAACS,YAAY,cAAc,CAACT,EAAG,OAAO,CAACA,EAAG,SAAS,CAACJ,EAAIQ,GAAG,YAAYR,EAAIQ,GAAG,IAAIR,EAAIiC,GAAGjC,EAAIyI,SAASC,eAAeC,UAAU3I,EAAIQ,GAAG,WAAWJ,EAAG,OAAO,CAACA,EAAG,SAAS,CAACJ,EAAIQ,GAAG,gBAAgBR,EAAIQ,GAAG,IAAIR,EAAIiC,GAAGjC,EAAIyI,SAASC,eAAeE,cAAc5I,EAAIQ,GAAG,WAAWR,EAAIY,MAAM,GAAGZ,EAAIY,MACr6EO,EAAkB,G,iCCwCtB,GACEe,KAAM,oBACNS,MAAO,CACL8F,SAAU7F,QAEZE,SAAU,CACRoF,MADJ,WAEM,OAAI,KAAV,kBACA,6BACA,WAEIM,oBANJ,WAOM,OAAO,IAAb,0CAEIxH,QATJ,WAUM,QAAOf,KAAK4I,UAAlB,IAAmC5I,KAAKwI,SAAStF,SAASC,QAAQ,KAAlE,wBAEIyF,QAZJ,WAaM,OAAO5I,KAAKwI,SAAS1E,QAAU9D,KAAK+D,OAAOC,MAAM1C,KAAKE,KAExDqH,SAfJ,WAgBM,OAAO7I,KAAKwI,SAASM,eAAe,aAEtCC,YAlBJ,WAmBM,OAAO/I,KAAKwI,SAASM,eAAe,YAGxCzF,KA3BF,WA4BI,MAAO,CACL6E,iBAAiB,IAGrB5E,QAAS,CACP6E,kBADJ,WAEMnI,KAAKkI,iBAAkB,EACnB,KAAV,SACA,qCAAQ,SAAR,uBAAQ,YAAR,4BACA,iBACA,wCAAQ,IAAR,kBAAQ,YAAR,4BAEA,sCAAQ,IAAR,kBAAQ,YAAR,+BCjF2V,I,YCOvVzE,EAAY,eACd,EACA3D,EACAoB,GACA,EACA,KACA,WACA,MAIa,OAAAuC,E,2CClBf,yBAAqjB,EAAG,G,oCCAxjB,yBAAwiB,EAAG,G,gFCA3iB,yBAAsiB,EAAG,G,kCCAziB,IAAI3D,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,MAAM,CAAC,eAAe,GAAG,IAAM,GAAG,KAAO,IAAIQ,GAAG,CAAC,WAAad,EAAIiJ,aAAa,CAAC7I,EAAG,SAAS,CAACS,YAAY,OAAOP,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAAC8I,IAAI,cAAc5I,MAAM,CAAC,UAAY,GAAG,IAAM,GAAG,KAAO,GAAG,UAAY,GAAG,qBAAqB,SAAS,MAAQ,qBAAqB,WAAa,QAAQ,SAAWN,EAAI0B,eAAe,QAAU1B,EAAIyH,iBAAiB,cAAc,WAAW3G,GAAG,CAAC,MAAQd,EAAImJ,aAAa,eAAe,SAASzI,GAAQ,OAAOV,EAAIgE,OAAOe,SAAU,aAAc,+DAAgE3C,MAAM,CAACC,MAAOrC,EAAgB,aAAEsC,SAAS,SAAUC,GAAMvC,EAAIoJ,aAAa7G,GAAKE,WAAW,mBAAmB,GAAIzC,EAAqB,kBAAEI,EAAG,SAAS,CAACS,YAAY,OAAO8E,YAAY,CAAC,aAAa,SAASrF,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,gBAAgB,CAACT,EAAG,eAAe,CAACS,YAAY,cAAc,CAACb,EAAIQ,GAAG,mBAAmBR,EAAIiC,GAAGjC,EAAIqJ,iBAAiBhI,QAAQ,eAAejB,EAAG,aAAcJ,EAAIqJ,iBAAiBhI,OAAO,EAAGjB,EAAG,cAAc,CAACuF,YAAY,CAAC,aAAa,QAAQ,aAAa,OAAO,aAAa,WAAW,CAAE3F,EAAIsJ,QAAQjI,OAAS,EAAGjB,EAAG,SAAS,CAACE,MAAM,CAAC,WAAW,KAAKN,EAAIsB,GAAItB,EAAoB,iBAAE,SAASmF,GAAQ,OAAO/E,EAAG,cAAc,CAACoB,IAAI2D,EAAOC,UAAU,CAAChF,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACJ,EAAIQ,GAAG,qBAAqBR,EAAIiC,GAAGkD,EAAOjD,MAAM,sBAAsB9B,EAAG,wBAAwB,CAACS,YAAY,WAAW,CAACT,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,iBAAiBJ,EAAG,OAAO,CAACS,YAAY,UAAU8E,YAAY,CAAC,cAAc,QAAQ,CAAC3F,EAAIQ,GAAGR,EAAIiC,GAAGkD,EAAOC,aAAapF,EAAIQ,GAAG,KAAKJ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIQ,GAAG,UAAUJ,EAAG,UAAU,CAACE,MAAM,CAAC,SAAW6E,EAAOG,cAAc,IAAI,GAAGlF,EAAG,qBAAqB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,GAAG,MAAQ,GAAG,UAAY,IAAIG,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIkF,aAAaC,EAAOC,aAAa,CAAChF,EAAG,SAAS,CAACJ,EAAIQ,GAAG,UAAU,IAAI,IAAI,KAAK,GAAGR,EAAIY,MAAM,GAAGZ,EAAIY,MAAM,IAAI,GAAGZ,EAAIY,MAAM,IACvgEO,EAAkB,G,qDCmCtB,GACEe,KAAM,eACNS,MAAO,CACL4G,cAAe,CACb1F,KAAM2F,MACN1F,QAFN,WAEA,WAEIpC,eAAgB,CACdmC,KAAMhB,QACNiB,SAAS,GAEX2F,UAAW5G,SAEbC,SAAU,CACR4G,gBADJ,WACA,WACM,OAAOzJ,KAAK+D,OAAOgD,QAAQ2C,kBAAkB,KAAnD,wFAEIN,iBAJJ,WAIA,WACA,4DAGM,OAFI,KAAV,YACA,uBAAQ,OAAR,qFACaO,IAGX1D,MAAO,CACLkD,aADJ,SACA,GACA,KAAU,GAAV,UACQnJ,KAAK4J,mBAAoB,EACzB5J,KAAKwH,kBAAmB,GAEhC,2BAGEnE,KAjCF,WAkCI,MAAO,CACL8F,aAAc,GACdE,QAAS,GACTO,mBAAmB,EACnBpC,kBAAkB,EAClBqC,WAAY,EACZC,SAAU,KAGdxG,QAAS,CACP0F,WADJ,WAEMhJ,KAAK+J,MAAMC,YAAYC,QAEzBC,eAJJ,WAKMlK,KAAK+D,OAAOe,SAAS,aAA3B,8DAEIG,aAPJ,SAOA,GACMjF,KAAKuD,MAAM,kBAAjB,IAEI2F,aAAc,IAAlB,YAGM,GAFAlJ,KAAKmJ,aAAegB,EAE1B,KAAU,GAAV,SAAM,CAIAnK,KAAK4J,mBAAoB,EACzB5J,KAAKwH,kBAAmB,EACxB,IACE,IAAR,+CACU,OAAI,EAAd,cACA,CAAY,IAAZ,gBAAY,MAAZ,iBACA,sFAGA,CAAY,IAAZ,EAAY,MAAZ,MAFmB,CAAnB,sBAIQxH,KAAKqJ,QAAUA,EACvB,SACQrJ,KAAKqJ,QAAU,CAAC,CAAxB,2BAhBQrJ,KAAK4J,mBAAoB,GAkBjC,OC/GsV,I,wBCQlVnG,EAAY,eACd,EACA3D,EACAoB,GACA,EACA,KACA,WACA,MAIa,OAAAuC,E","file":"js/chunk-60e049cf.92cbab50.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.project)?_c('v-container',{attrs:{\"grid-list-xl\":\"\"}},[(_vm.project.deleted)?_c('v-toolbar',{attrs:{\"absolute\":\"\"}},[_c('span',[_vm._v(\"This project is in your trashbin. \")]),_c('v-spacer'),(_vm.canEdit)?_c('v-btn',{attrs:{\"color\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.restore($event)}}},[_vm._v(\" Restore? \")]):_vm._e()],1):_vm._e(),_c('v-layout',{staticClass:\"mb-3\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('project-detail-title',{attrs:{\"project\":_vm.project}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('detail-description',{attrs:{\"resource\":_vm.project}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm12\":\"\",\"lg12\":\"\"}},[_c('v-card',{staticClass:\"elevation-0\"},[_c('v-card-title',{staticClass:\"title font-weight-light\"},[_c('v-icon',{attrs:{\"small\":\"\",\"left\":\"\"}},[_vm._v(\"supervisor_account\")]),_vm._v(\" \\n          Users\\n        \")],1),_c('v-card-text',[(_vm.canEdit)?_c('user-search',{on:{\"selected-user\":_vm.addUserToTeam}}):_vm._e(),_c('permission-table',{attrs:{\"project\":_vm.project,\"global-disabled\":!_vm.canEdit},on:{\"remove-user\":function($event){},\"move-user\":function($event){}}})],1)],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm12\":\"\",\"lg12\":\"\"}},[_c('v-card',{staticClass:\"elevation-0\"},[_c('v-card-title',{staticClass:\"title font-weight-light\"},[_c('v-icon',{attrs:{\"small\":\"\",\"left\":\"\"}},[_vm._v(\"import_export\")]),_vm._v(\" \\n          Streams\\n        \")],1),_c('v-card-text',[_c('project-detail-streams',{attrs:{\"project\":_vm.project},on:{\"selected-stream\":_vm.addStream,\"remove-stream\":_vm.removeStream}})],1)],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.allUsersPop.length > 0 && _vm.project)?_c('v-container',{staticClass:\"pa-0 ma-0\",attrs:{\"grid-list-sm\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[(!_vm.canEdit)?_c('v-flex',{attrs:{\"xs12\":\"\"}},[_vm._v(\"You cannot add users to this project.\")]):_vm._e(),_vm._l((_vm.allUsersPop),function(user){return (user)?_c('v-flex',{key:user._id,attrs:{\"xs12\":\"\"}},[_c('user-perm-card',{attrs:{\"user\":user,\"project\":_vm.project,\"global-disabled\":_vm.globalDisabled},on:{\"change-permission-streams\":_vm.changePermissionStreams,\"change-permission-project\":_vm.changePermissionProject,\"remove-user\":_vm.removeUser}})],1):_vm._e()})],2)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user)?_c('v-card',{staticClass:\"pa-3 elevation-0 xxxmy-3\",class:{ disabled: _vm.user.archived },attrs:{\"tile\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"justify-space-between\":\"\",\"align-center\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\"}},[_c('b',[_vm._v(_vm._s(_vm.user.name)+\" \"+_vm._s(_vm.user.surname))])]),_c('v-flex',[_c('v-checkbox',{attrs:{\"label\":\"Edit Streams\",\"disabled\":!_vm.canEdit},nativeOn:{\"click\":function($event){return _vm.changePermissionStreams()}},model:{value:(_vm.writeStreams),callback:function ($$v) {_vm.writeStreams=$$v},expression:\"writeStreams\"}})],1),_c('v-flex',[_c('v-checkbox',{attrs:{\"label\":\"Edit Project\",\"disabled\":!_vm.canEdit},nativeOn:{\"click\":function($event){return _vm.changePermissionProject()}},model:{value:(_vm.writeProject),callback:function ($$v) {_vm.writeProject=$$v},expression:\"writeProject\"}})],1),_c('v-flex',{staticClass:\"text-xs-right\"},[_c('v-btn',{attrs:{\"icon\":\"\",\"fab\":\"\",\"disabled\":!_vm.canEdit},nativeOn:{\"click\":function($event){return _vm.removeUser()}}},[_c('v-icon',[_vm._v(\"close\")])],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card tile class='pa-3 elevation-0 xxxmy-3' v-if='user' :class=\"{ disabled: user.archived }\">\r\n    <v-layout row justify-space-between align-center>\r\n      <v-flex xs5><b>{{user.name}} {{user.surname}}</b></v-flex>\r\n      <v-flex>\r\n        <v-checkbox v-model=\"writeStreams\" :label=\"`Edit Streams`\" @click.native='changePermissionStreams()' :disabled='!canEdit'></v-checkbox>\r\n      </v-flex>\r\n      <v-flex>\r\n        <v-checkbox v-model=\"writeProject\" :label=\"`Edit Project`\" @click.native='changePermissionProject()' :disabled='!canEdit'></v-checkbox>\r\n      </v-flex>\r\n      <v-flex class='text-xs-right'>\r\n        <v-btn icon fab @click.native='removeUser()' :disabled='!canEdit' >\r\n          <v-icon>close</v-icon>\r\n        </v-btn>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-card>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'UserPermissionProjectCard',\r\n  props: {\r\n    project: Object,\r\n    user: Object,\r\n    globalDisabled: Boolean\r\n  },\r\n  computed: {\r\n    canEdit( ) {\r\n      console.log( !this.user.archived )\r\n      return ( this.user.surname.includes( `(that is you!)` ) || !this.globalDisabled || this.$store.state.user.role === 'admin' ) && !this.user.archived\r\n    },\r\n    hasWritePermissionStreams( ) {\r\n      return this.project.permissions.canWrite.indexOf( this.user._id ) > -1\r\n    },\r\n    hasWritePermissionProject( ) {\r\n      return this.project.canWrite.indexOf( this.user._id ) > -1\r\n    }\r\n  },\r\n  data( ) {\r\n    return {\r\n      writeStreams: false,\r\n      writeProject: false\r\n    }\r\n  },\r\n  methods: {\r\n    changePermissionStreams( ) {\r\n      this.$emit( 'change-permission-streams', this.user._id )\r\n    },\r\n    changePermissionProject( ) {\r\n      this.$emit( 'change-permission-project', this.user._id )\r\n    },\r\n    removeUser( ) {\r\n      this.$emit( 'remove-user', this.user._id )\r\n    },\r\n  },\r\n  mounted( ) {\r\n    this.writeStreams = this.hasWritePermissionStreams\r\n    this.writeProject = this.hasWritePermissionProject\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n.disabled {\r\n\r\n  color: lightgrey;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPermissionProjectCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPermissionProjectCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserPermissionProjectCard.vue?vue&type=template&id=517af5a7&scoped=true&\"\nimport script from \"./UserPermissionProjectCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserPermissionProjectCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserPermissionProjectCard.vue?vue&type=style&index=0&id=517af5a7&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"517af5a7\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <v-container grid-list-sm v-if='allUsersPop.length > 0 && project' class='pa-0 ma-0'>\r\n    <v-layout row wrap>\r\n      <v-flex xs12 v-if='!canEdit'>You cannot add users to this project.</v-flex>\r\n      <v-flex xs12 v-for='user in allUsersPop' v-if='user' :key='user._id'>\r\n        <user-perm-card\r\n        @change-permission-streams='changePermissionStreams'\r\n        @change-permission-project='changePermissionProject'\r\n        @remove-user='removeUser'\r\n        :user='user' :project='project' :global-disabled='globalDisabled'></user-perm-card>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport union from 'lodash.union'\r\nimport uniq from 'lodash.uniq'\r\n\r\nimport UserPermCard from '@/components/UserPermissionProjectCard.vue'\r\n\r\nexport default {\r\n  name: 'PermissionTable',\r\n  components: {\r\n    UserPermCard\r\n  },\r\n  props: {\r\n    project: Object,\r\n    globalDisabled: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  computed: {\r\n    canEdit( ) {\r\n      return this.project.owner === this.$store.state.user._id || this.project.canWrite.indexOf( this.$store.state.user._id ) > -1 || this.$store.state.user.role === 'admin'\r\n    },\r\n    canReadProject( ) { return this.project.canRead },\r\n    canWriteProject( ) { return this.project.canWrite },\r\n    canReadStreams( ) { return this.project.permissions.canRead },\r\n    canWriteStreams( ) { return this.project.permissions.canWrite },\r\n    allUsers( ) {\r\n      return uniq( [ ...this.canReadProject, ...this.canWriteProject, ...this.canReadStreams, ...this.canWriteProject, this.project.owner ] )\r\n    },\r\n    allUsersPop( ) {\r\n      if ( this.allUsers.length === 0 ) return [ ]\r\n      return this.allUsers.map( userId => {\r\n        let u = this.$store.state.users.find( user => user._id === userId )\r\n        if ( !u ) this.$store.dispatch( 'getUser', { _id: userId } )\r\n        if ( u ) u.isOwner = u._id === this.project.owner\r\n        return u\r\n      } ) //.sort( ( a, b ) => a.name > b.name ? 1 : -1 )\r\n    }\r\n  },\r\n  data( ) {\r\n    return {}\r\n  },\r\n  methods: {\r\n    hasWritePermissionStreams( _id ) {\r\n      return this.canWriteStreams.indexOf( _id ) > -1\r\n    },\r\n    hasWritePermissionProject( _id ) {\r\n      return this.canWriteProject.indexOf( _id ) > -1\r\n    },\r\n    changePermissionProject( userId ) {\r\n      let canWrite = this.project.canWrite.indexOf( userId ) > -1 ? true : false\r\n      let localCanWrite = [ ],\r\n        localCanRead = [ ],\r\n        streamCanWrite = this.project.permissions.canWrite,\r\n        streamCanRead = this.project.permissions.canRead\r\n\r\n      if ( canWrite ) {\r\n        localCanWrite = this.project.canWrite.filter( uId => uId !== userId )\r\n        localCanRead = uniq( [ ...this.project.canRead, userId ] )\r\n      } else {\r\n        localCanRead = this.project.canRead\r\n        localCanWrite = uniq( [ ...this.project.canWrite, userId ] )\r\n        // TODO: UPGRADE STREAMS CANWRITE TOO (otherwise user x can edit the project but not do much)\r\n        streamCanWrite = uniq( [ ...streamCanWrite, userId ] )\r\n        this.upgradeUser( userId )\r\n      }\r\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, permissions: { canRead: streamCanRead, canWrite: streamCanWrite }, canRead: localCanRead, canWrite: localCanWrite } )\r\n    },\r\n    changePermissionStreams( userId ) {\r\n      let hasWritePermission = this.project.permissions.canWrite.indexOf( userId ) > -1 ? true : false\r\n      if ( !hasWritePermission ) this.upgradeUser( userId )\r\n      else this.downgradeUser( userId )\r\n    },\r\n    upgradeUser( userId ) {\r\n      this.$store.dispatch( 'upgradeUserInProject', { projectId: this.project._id, userId: userId } )\r\n    },\r\n    downgradeUser( userId ) {\r\n      this.$store.dispatch( 'downgradeUserInProject', { projectId: this.project._id, userId: userId } )\r\n    },\r\n    removeUser( userId ) {\r\n      this.$store.dispatch( 'removeUserInProject', { projectId: this.project._id, userId: userId } )\r\n    }\r\n  },\r\n  mounted( ) {}\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n.user {\r\n  padding: 2px 10px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionTableProject.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionTableProject.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PermissionTableProject.vue?vue&type=template&id=7ab298c8&scoped=true&\"\nimport script from \"./PermissionTableProject.vue?vue&type=script&lang=js&\"\nexport * from \"./PermissionTableProject.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PermissionTableProject.vue?vue&type=style&index=0&id=7ab298c8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ab298c8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"elevation-0\"},[(_vm.canEdit)?_c('stream-search',{attrs:{\"streams-to-omit\":_vm.streams,\"write-only\":\"\"},on:{\"selected-stream\":_vm.selectStream}}):_vm._e(),(_vm.streams.length === 0)?_c('v-card-text',{staticClass:\"md-layout-item md-size-100\"},[(_vm.canEdit)?_c('p',[_vm._v(\"This project has no streams. Add some using the form above!\")]):_c('p',[_vm._v(\"This project has no streams.\")])]):_c('v-card-text',{staticClass:\"pa-0\"},[_c('v-list',{attrs:{\"two-line\":\"\"}},_vm._l((_vm.populatedStreams),function(stream){return _c('v-list-tile',{key:stream.streamId},[_c('v-list-tile-content',[_c('v-list-tile-title',[_c('span',{staticClass:\"caption\"},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"fingerprint\")]),_vm._v(\" \"+_vm._s(stream.streamId)+\"\\n               \"),_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(stream.private ? \"lock\" : \"lock_open\"))])],1),_vm._v(\" \\n            \"),_c('span',{staticClass:\"text-capitalize\"},[_vm._v(_vm._s(stream.name))]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/streams/\" + stream.streamId}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"open_in_new\")])],1)],1),_c('v-list-tile-sub-title',{staticClass:\"xxx-font-weight-thin caption\"},[_vm._v(\"\\n            last changed \"),_c('timeago',{attrs:{\"datetime\":stream.updatedAt}}),_vm._v(\", created on \"+_vm._s(new Date( stream.createdAt ).toLocaleString())+\"\\n          \")],1)],1),_c('v-list-tile-action',[_c('v-btn',{attrs:{\"disabled\":!_vm.canEdit,\"small\":\"\",\"icon\":\"\"},nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.removeStream(stream.streamId)}}},[_c('v-icon',[_vm._v(\"close\")])],1)],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.stream)?_c('md-card',{staticClass:\"md-elevation-0\",staticStyle:{\"margin-bottom\":\"5px\"}},[_c('md-card-content',{staticClass:\"md-layout md-gutter md-alignment-center-left\"},[_c('div',{staticClass:\"md-layout-item md-size-30\"},[_c('router-link',{attrs:{\"to\":\"/streams/\"+_vm.stream.streamId}},[_vm._v(_vm._s(_vm.stream.name))])],1),_c('div',{staticClass:\"md-layout-item md-caption\"},[(_vm.stream.commitMessage)?_c('span',[_vm._v(\" \"+_vm._s(_vm.stream.commitMessage))]):_vm._e()]),_c('div',{staticClass:\"md-layout-item md-caption text-right\"},[_vm._v(\"\\n      \"+_vm._s(_vm.stream.streamId)+\" | last update \"),_c('strong',[_c('timeago',{attrs:{\"datetime\":_vm.stream.updatedAt}})],1)]),(_vm.removable)?_c('div',{staticClass:\"md-layout-item text-right\"},[_c('md-button',{staticClass:\"md-dense-xxx md-icon-button md-accent\",nativeOn:{\"click\":function($event){return _vm.$emit(\"remove-stream\", _vm.streamId)}}},[_c('md-icon',[_vm._v(\"delete\")])],1)],1):_vm._e()])],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <md-card class='md-elevation-0' style='margin-bottom: 5px;' v-if='stream'>\r\n    <md-card-content class='md-layout md-gutter md-alignment-center-left'>\r\n      <div class=\"md-layout-item md-size-30\">\r\n        <router-link :to='\"/streams/\"+stream.streamId'>{{stream.name}}</router-link>\r\n      </div>\r\n      <div class=\"md-layout-item md-caption\">\r\n        <span v-if='stream.commitMessage'> {{stream.commitMessage}}</span>\r\n      </div>\r\n      <div class=\"md-layout-item md-caption text-right\">\r\n        {{stream.streamId}} | last update <strong><timeago :datetime='stream.updatedAt'></timeago></strong>\r\n      </div>\r\n      <div class=\"md-layout-item text-right\" v-if='removable'>\r\n        <md-button class='md-dense-xxx md-icon-button md-accent' @click.native='$emit(\"remove-stream\", streamId)'>\r\n          <md-icon>delete</md-icon>\r\n        </md-button>\r\n      </div>\r\n    </md-card-content>\r\n  </md-card>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'StreamCardSmall',\r\n  props: {\r\n    streamId: String,\r\n    removable: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  computed: {\r\n    stream( ) {\r\n      let stream = this.$store.state.streams.find( s => s.streamId === this.streamId )\r\n      if ( !stream ) this.$store.dispatch( 'getStream', { streamId: this.streamId } )\r\n      return stream\r\n    }\r\n  },\r\n  data( ) { return {} },\r\n  methods: {}\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamCardSmall.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamCardSmall.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StreamCardSmall.vue?vue&type=template&id=45a6e80e&scoped=true&\"\nimport script from \"./StreamCardSmall.vue?vue&type=script&lang=js&\"\nexport * from \"./StreamCardSmall.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45a6e80e\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <v-card class='elevation-0'>\r\n    <stream-search :streams-to-omit='streams' write-only v-on:selected-stream='selectStream' v-if='canEdit'></stream-search>\r\n    <v-card-text class='md-layout-item md-size-100' v-if='streams.length === 0'>\r\n      <p v-if='canEdit'>This project has no streams. Add some using the form above!</p>\r\n      <p v-else>This project has no streams.</p>\r\n    </v-card-text>\r\n    <v-card-text v-else class='pa-0'>\r\n      <v-list two-line>\r\n        <v-list-tile v-for='stream in populatedStreams' :key='stream.streamId'>\r\n          <v-list-tile-content>\r\n            <v-list-tile-title>\r\n              <span class='caption'>\r\n                <v-icon small>fingerprint</v-icon> {{stream.streamId}}\r\n                &nbsp;<v-icon small>{{stream.private ? \"lock\" : \"lock_open\"}}</v-icon>\r\n              </span>&nbsp;\r\n              <span class='text-capitalize'>{{stream.name}}</span>&nbsp;<router-link :to='\"/streams/\" + stream.streamId'><v-icon small>open_in_new</v-icon></router-link>\r\n            </v-list-tile-title>\r\n            <v-list-tile-sub-title class='xxx-font-weight-thin caption'>\r\n              last changed <timeago :datetime='stream.updatedAt'></timeago>, created on {{new Date( stream.createdAt ).toLocaleString()}}\r\n            </v-list-tile-sub-title>\r\n          </v-list-tile-content>\r\n          <v-list-tile-action>\r\n            <v-btn :disabled='!canEdit' small icon @click.stop.native='removeStream(stream.streamId)'><v-icon>close</v-icon></v-btn>\r\n          </v-list-tile-action>\r\n        </v-list-tile>\r\n      </v-list>\r\n      </v-list>\r\n      <!-- <stream-card-small v-for='stream in streams' :key='stream' :streamId='stream' v-on:remove-stream='removeStream' :removable='canEdit'></stream-card-small> -->\r\n    </v-card-text>\r\n  </v-card>\r\n</template>\r\n<script>\r\nimport debounce from 'lodash.debounce'\r\nimport StreamCardSmall from './StreamCardSmall.vue'\r\nimport StreamSearch from './StreamSearch.vue'\r\n\r\nexport default {\r\n  name: 'ProjectStreams',\r\n  components: {\r\n    StreamCardSmall,\r\n    StreamSearch\r\n  },\r\n  props: {\r\n    project: Object,\r\n  },\r\n  computed: {\r\n    streams( ) { return this.project.streams ? this.project.streams : [ ] },\r\n    populatedStreams( ) {\r\n      return this.$store.state.streams.filter( stream => this.streams.indexOf( stream.streamId ) !== -1 )\r\n    },\r\n    canEdit( ) {\r\n      return this.project.owner === this.$store.state.user._id || this.project.canWrite.indexOf( this.$store.state.user._id ) > -1 || this.$store.state.user.role === 'admin'\r\n    },\r\n  },\r\n  watch: {},\r\n  data( ) {\r\n    return {}\r\n  },\r\n  methods: {\r\n    selectStream( streamId ) {\r\n      // just bubble it up\r\n      this.$emit( 'selected-stream', streamId )\r\n    },\r\n    removeStream( streamId ) {\r\n      // just bubble it up\r\n      this.$emit( 'remove-stream', streamId )\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectDetailStreams.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectDetailStreams.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProjectDetailStreams.vue?vue&type=template&id=08ed4656&scoped=true&\"\nimport script from \"./ProjectDetailStreams.vue?vue&type=script&lang=js&\"\nexport * from \"./ProjectDetailStreams.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08ed4656\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"elevation-0 pa-3\"},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"display-1 font-weight-light text-capitalize my-5\",attrs:{\"xs12\":\"\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.$router.push((\"/view/\" + _vm.allProjectStreams))}}},[_c('v-icon',[_vm._v(\"360\")])],1),(_vm.canEdit)?_c('editable-span',{attrs:{\"text\":_vm.project.name},on:{\"update\":_vm.updateName}}):_c('span',[_vm._v(_vm._s(_vm.project.name))])],1),_c('v-flex',{staticClass:\"caption\",staticStyle:{\"line-height\":\"32px\"},attrs:{\"xs12\":\"\"}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"person\")]),_c('span',{staticClass:\"caption\"},[_vm._v(_vm._s(_vm.project.canRead.length))]),_vm._v(\" \\n      \"),_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"import_export\")]),_c('span',{staticClass:\"caption\"},[_vm._v(_vm._s(_vm.project.streams.length))]),_vm._v(\" \\n      \"),_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"fingerprint\")]),_vm._v(\" \"),_c('strong',{staticStyle:{\"user-select\":\"all\"}},[_vm._v(_vm._s(_vm.project._id))]),_vm._v(\" \\n      \"),_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"access_time\")]),_vm._v(\" \"),_c('timeago',{attrs:{\"datetime\":_vm.project.updatedAt}}),_vm._v(\" \\n      \"),_c('span',{staticClass:\"caption font-weight-light text-uppercase\"},[_vm._v(\"Owned by \"),_c('strong',[_vm._v(_vm._s(_vm.owner))]),_vm._v(\". You \"+_vm._s(_vm.canEdit ? 'can' : 'cannot')+\" edit.\")])],1),_c('v-flex',{staticClass:\"ma-0 pa-0 mt-3 mb-2\",attrs:{\"xs12\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{attrs:{\"xs3\":\"\"}},[_c('v-text-field',{attrs:{\"hint\":\"Project Code (numbers only)\",\"mask\":\"###### - ##\",\"solo\":\"\",\"persistent-hint\":\"\",\"disabled\":!_vm.canEdit},on:{\"input\":_vm.updateJobNumber},model:{value:(_vm.project.jobNumber),callback:function ($$v) {_vm.$set(_vm.project, \"jobNumber\", $$v)},expression:\"project.jobNumber\"}})],1),_c('v-flex',{attrs:{\"xs9\":\"\"}},[_c('v-combobox',{attrs:{\"disabled\":!_vm.canEdit,\"items\":_vm.allTags,\"hint\":\"add or remove tags\",\"solo\":\"\",\"persistent-hint\":\"\",\"small-chips\":\"\",\"deletable-chips\":\"\",\"multiple\":\"\",\"tags\":\"\"},on:{\"input\":_vm.updateTags},scopedSlots:_vm._u([{key:\"no-data\",fn:function(){return [_vm._v(\"Add a new tag!\")]},proxy:true}]),model:{value:(_vm.project.tags),callback:function ($$v) {_vm.$set(_vm.project, \"tags\", $$v)},expression:\"project.tags\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card class='elevation-0 pa-3'>\r\n    <v-layout row wrap>\r\n      <v-flex xs12 class='display-1 font-weight-light text-capitalize my-5'>\r\n        <v-btn icon @click.native='$router.push(`/view/${allProjectStreams}`)'>\r\n          <v-icon>360</v-icon>\r\n        </v-btn>\r\n        <!-- {{allProjectStreams}} -->\r\n        <editable-span v-if='canEdit' :text='project.name' @update='updateName'></editable-span>\r\n        <span v-else>{{project.name}}</span>\r\n      </v-flex>\r\n      <v-flex xs12 class='caption' style='line-height: 32px'>\r\n        <v-icon small>person</v-icon> <span class='caption'>{{project.canRead.length}}</span>&nbsp;\r\n        <v-icon small>import_export</v-icon> <span class='caption'>{{project.streams.length}}</span>&nbsp;\r\n        <v-icon small>fingerprint</v-icon>&nbsp;<strong style=\"user-select:all\">{{project._id}}</strong>&nbsp;\r\n        <v-icon small>access_time</v-icon>&nbsp;<timeago :datetime='project.updatedAt'></timeago>&nbsp;\r\n        <span class='caption font-weight-light text-uppercase'>Owned by <strong>{{owner}}</strong>. You {{canEdit ? 'can' : 'cannot'}} edit.</span>\r\n      </v-flex>\r\n      <v-flex xs12 class='ma-0 pa-0 mt-3 mb-2'>\r\n        <v-layout row align-center>\r\n          <v-flex xs3 class=''>\r\n            <v-text-field hint='Project Code (numbers only)' mask='###### - ##' v-model='project.jobNumber' solo persistent-hint :disabled='!canEdit' @input='updateJobNumber'></v-text-field>\r\n          </v-flex>\r\n          <v-flex xs9>\r\n            <v-combobox @input='updateTags' :disabled='!canEdit' v-model=\"project.tags\" :items='allTags' hint='add or remove tags' solo persistent-hint small-chips deletable-chips multiple tags>\r\n              <template v-slot:no-data>Add a new tag!</template>\r\n            </v-combobox>\r\n          </v-flex>\r\n        </v-layout>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-card>\r\n</template>\r\n<script>\r\nimport debounce from 'lodash.debounce'\r\nimport uniq from 'lodash.uniq'\r\n\r\nexport default {\r\n  name: 'HelloWorld',\r\n  props: {\r\n    project: Object\r\n  },\r\n  computed: {\r\n    allProjectStreams( ) {\r\n      return this.project.streams.join(',')\r\n    },\r\n    allTags( ) {\r\n      return this.$store.getters.allTags\r\n    },\r\n    canEdit( ) {\r\n      return this.project.owner === this.$store.state.user._id || this.project.canWrite.indexOf( this.$store.state.user._id ) > -1\r\n    },\r\n    owner( ) {\r\n      let u = this.$store.state.users.find( user => user._id === this.project.owner )\r\n      if ( !u ) {\r\n        this.$store.dispatch( 'getUser', { _id: this.project.owner } )\r\n      }\r\n      return u ? u.surname.includes( \"is you\" ) ? `you` : `${u.name} ${u.surname}` : 'Loading'\r\n    },\r\n    canReadProject( ) { return this.project.canRead },\r\n    canWriteProject( ) { return this.project.canWrite },\r\n    canReadStreams( ) { return this.project.permissions.canRead },\r\n    canWriteStreams( ) { return this.project.permissions.canWrite },\r\n    allUsers( ) {\r\n      return uniq( [ ...this.canReadProject, ...this.canWriteProject, ...this.canReadStreams, ...this.canWriteProject, this.project.owner ] )\r\n    }\r\n  },\r\n  data( ) { return {} },\r\n  methods: {\r\n    updateName( args ) {\r\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, name: args.text } )\r\n    },\r\n    updateTags: debounce( function ( e ) {\r\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, tags: this.project.tags } )\r\n    }, 1000 ),\r\n    updateJobNumber: debounce( function ( e ) {\r\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, jobNumber: this.project.jobNumber } )\r\n    }, 1000 )\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n.title-card {\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n}\r\n\r\n.project-name {\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.project-name:hover {\r\n  color: #448aff;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectDetailTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectDetailTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProjectDetailTitle.vue?vue&type=template&id=1cad9c7e&scoped=true&\"\nimport script from \"./ProjectDetailTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./ProjectDetailTitle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProjectDetailTitle.vue?vue&type=style&index=0&id=1cad9c7e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1cad9c7e\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <v-container grid-list-xl v-if='project'>\r\n    <v-toolbar absolute v-if='project.deleted'>\r\n      <span>This project is in your trashbin. </span>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color='primary' v-if='canEdit' @click.native='restore'> Restore? </v-btn>\r\n    </v-toolbar>\r\n    <v-layout row wrap class='mb-3'>\r\n      <v-flex xs12>\r\n        <project-detail-title :project='project'></project-detail-title>\r\n      </v-flex>\r\n      <v-flex xs12>\r\n        <detail-description :resource='project'></detail-description>\r\n      </v-flex>\r\n      <v-flex xs12 sm12 lg12>\r\n        <v-card class='elevation-0'>\r\n          <v-card-title class='title font-weight-light'>\r\n            <v-icon small left>supervisor_account</v-icon>&nbsp;\r\n            Users\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <user-search v-on:selected-user='addUserToTeam' v-if='canEdit'></user-search>\r\n            <permission-table :project='project' :global-disabled='!canEdit' @remove-user='' @move-user=''></permission-table>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-flex>\r\n      <v-flex xs12 sm12 lg12>\r\n        <v-card  class='elevation-0'>\r\n          <v-card-title class='title font-weight-light'>\r\n            <v-icon small left>import_export</v-icon>&nbsp;\r\n            Streams\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <project-detail-streams :project='project' v-on:selected-stream='addStream' v-on:remove-stream='removeStream'></project-detail-streams>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport union from 'lodash.union'\r\nimport uniq from 'lodash.uniq'\r\n\r\nimport UserSearch from '../components/UserSearch.vue'\r\nimport PermissionTable from '../components/PermissionTableProject.vue'\r\nimport DetailDescription from '../components/DetailDescription.vue'\r\nimport ProjectDetailStreams from '../components/ProjectDetailStreams.vue'\r\nimport ProjectDetailTitle from '../components/ProjectDetailTitle.vue'\r\n\r\nexport default {\r\n  name: 'ProjectDetailView',\r\n  components: {\r\n    UserSearch,\r\n    PermissionTable,\r\n    DetailDescription,\r\n    ProjectDetailStreams,\r\n    ProjectDetailTitle\r\n  },\r\n  props: {},\r\n  computed: {\r\n    canEdit( ) {\r\n      return this.project.owner === this.$store.state.user._id || this.project.canWrite.indexOf( this.$store.state.user._id ) > -1 || this.$store.state.user.role === 'admin'\r\n    },\r\n    project( ) {\r\n      return this.$store.state.projects.find( p => p._id === this.$route.params.projectId )\r\n    },\r\n    canReadProject( ) { return this.project.canRead },\r\n    canWriteProject( ) { return this.project.canWrite },\r\n    canReadStreams( ) { return this.project.permissions.canRead },\r\n    canWriteStreams( ) { return this.project.permissions.canWrite },\r\n    allUsers( ) {\r\n      return uniq( [ ...this.canReadProject, ...this.canWriteProject, ...this.canReadStreams, ...this.canWriteProject, this.project.owner ] )\r\n    }\r\n  },\r\n  data( ) {\r\n    return {}\r\n  },\r\n  methods: {\r\n    restore( ) {\r\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, deleted: false } )\r\n    },\r\n    addUserToTeam( userId ) {\r\n      this.$store.dispatch( 'addUserToProject', { projectId: this.project._id, userId: userId } )\r\n      return\r\n    },\r\n    addStream( streamId ) {\r\n      this.$store.dispatch( 'addStreamToProject', { projectId: this.project._id, streamId: streamId } )\r\n      return\r\n    },\r\n    removeStream( streamId ) {\r\n      this.$store.dispatch( 'removeStreamFromProject', { projectId: this.project._id, streamId: streamId } )\r\n    },\r\n  },\r\n  mounted( ) {\r\n    let project = this.$store.state.projects.find( p => p._id === this.$route.params.projectId )\r\n    if ( !project ) {\r\n      this.$store.dispatch( 'getProject', { _id: this.$route.params.projectId } )\r\n        .then( res => {\r\n          this.$store.dispatch( 'getUser', { _id: res.data.resource.owner } )\r\n          union( res.data.resource.canRead, res.data.resource.canWrite ).forEach( _id => this.$store.dispatch( 'getUser', { _id: _id } ) )\r\n        } )\r\n        .catch( err => {\r\n          if ( this.$store.state.isAuth ) {\r\n            this.$router.push( '/projects' )\r\n            console.log( \"you don't have permission.\" )\r\n          } else {\r\n            console.log( \"should redirect to login\" )\r\n            this.$router.push( '/login' )\r\n          }\r\n          console.log( err )\r\n        } )\r\n    } else {\r\n      this.$store.dispatch( 'getUser', { _id: project.owner } )\r\n      union( project.canRead, project.canWrite ).forEach( _id => this.$store.dispatch( 'getUser', { _id: _id } ) )\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n.detail-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Project.vue?vue&type=template&id=6e2710d1&scoped=true&\"\nimport script from \"./Project.vue?vue&type=script&lang=js&\"\nexport * from \"./Project.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Project.vue?vue&type=style&index=0&id=6e2710d1&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e2710d1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectDetailTitle.vue?vue&type=style&index=0&id=1cad9c7e&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectDetailTitle.vue?vue&type=style&index=0&id=1cad9c7e&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionTableProject.vue?vue&type=style&index=0&id=7ab298c8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionTableProject.vue?vue&type=style&index=0&id=7ab298c8&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=style&index=0&id=6e2710d1&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=style&index=0&id=6e2710d1&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"align-center\":\"\",\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"pb-0\",attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"box\":\"\",\"label\":\"search for users\",\"clearable\":\"\",\"flat\":\"\",\"loading\":_vm.searchInProgress,\"prepend-inner-icon\":\"search\"},on:{\"input\":_vm.startSearchUsers},model:{value:(_vm.userSearch),callback:function ($$v) {_vm.userSearch=$$v},expression:\"userSearch\"}})],1),(_vm.userSearch!==null && _vm.foundUsers.length > 0)?_c('v-flex',{staticClass:\"mb-5\",staticStyle:{\"margin-top\":\"-30px\"},attrs:{\"xs12\":\"\"}},[_c('v-card',{staticClass:\"elevation-10\"},[(_vm.userSearch)?_c('v-card-title',{staticClass:\"subheading\"},[_vm._v(\"Search results (\"+_vm._s(_vm.foundUsers.length)+\" users)\")]):_vm._e(),_c('v-divider'),(_vm.foundUsers.length>0)?_c('v-card-text',{staticStyle:{\"max-height\":\"410px\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[_c('v-list',{attrs:{\"two-line\":\"\",\"xxxv-if\":\"filters.length > 0\"}},_vm._l((_vm.foundUsers),function(user){return _c('v-list-tile',{key:user._id},[_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"\\n                \"+_vm._s(user.name)+\" \"+_vm._s(user.surname)+\"\\n              \")]),_c('v-list-tile-sub-title',{staticClass:\"caption\"},[_c('span',{staticClass:\"caption\"},[_vm._v(_vm._s(user.company))])])],1),_c('v-list-tile-action',[_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"depressed\":\"\"},nativeOn:{\"click\":function($event){return _vm.selectUser(user._id)}}},[_c('v-icon',[_vm._v(\"add\")])],1)],1)],1)}),1)],1):_vm._e()],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-layout align-center row wrap>\r\n    <v-flex xs12 class='pb-0'>\r\n      <v-text-field box label='search for users' clearable v-model='userSearch' flat :loading='searchInProgress' prepend-inner-icon=\"search\" @input='startSearchUsers'></v-text-field>\r\n    </v-flex>\r\n    <v-flex xs12 style='margin-top:-30px' class='mb-5' v-if='userSearch!==null && foundUsers.length > 0'>\r\n      <v-card class='elevation-10'>\r\n        <v-card-title class='subheading' v-if='userSearch'>Search results ({{foundUsers.length}} users)</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style='max-height: 410px; overflow-y: auto; overflow-x: hidden;' v-if='foundUsers.length>0'>\r\n          <v-list two-line xxxv-if='filters.length > 0'>\r\n            <v-list-tile v-for='user in foundUsers' :key='user._id'>\r\n              <v-list-tile-content>\r\n                <v-list-tile-title>\r\n                  {{user.name}} {{user.surname}}\r\n                </v-list-tile-title>\r\n                <v-list-tile-sub-title class='caption'>\r\n                  <span class='caption'>{{user.company}}</span>\r\n                </v-list-tile-sub-title>\r\n              </v-list-tile-content>\r\n              <v-list-tile-action>\r\n                <v-btn fab small depressed @click.native='selectUser(user._id)'>\r\n                  <v-icon>add</v-icon>\r\n                </v-btn>\r\n              </v-list-tile-action>\r\n            </v-list-tile>\r\n          </v-list>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-flex>\r\n  </v-layout>\r\n</template>\r\n<script>\r\nimport debounce from 'lodash.debounce'\r\nimport Axios from 'axios'\r\n\r\nexport default {\r\n  name: 'UserSearch',\r\n  props: {\r\n    msg: String\r\n  },\r\n  data( ) {\r\n    return {\r\n      userSearch: '',\r\n      foundUsers: [ ],\r\n      searchInProgress: false\r\n    }\r\n  },\r\n  watch: {\r\n    userSearch( newVal, oldVal ) {\r\n      if ( newVal === '' ) {\r\n        this.foundUsers = [ ]\r\n        this.searchInProgress = false\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    selectUser( userId ) {\r\n      this.$emit( 'selected-user', userId )\r\n      let index = this.foundUsers.findIndex( u => u._id === userId )\r\n      this.foundUsers.splice( index, 1 )\r\n    },\r\n    startSearchUsers( ) {\r\n      this.searchInProgress = true\r\n      this.searchUsers( this.userSearch )\r\n    },\r\n    searchUsers: debounce( function( searchString ) {\r\n      if ( searchString === '' || searchString === null ) {\r\n        this.foundUsers = [ ]\r\n        this.searchInProgress = false\r\n        return\r\n      }\r\n      if ( searchString.length < 3 ) {\r\n        // TODO: Show an error\r\n        return\r\n      }\r\n      Axios.post( '/accounts/search', { searchString: searchString } )\r\n        .then( res => {\r\n          console.log( res )\r\n          this.foundUsers = res.data.resources\r\n          // build up a db of users\r\n          if ( res.data.resources.length > 0 )\r\n            this.$store.commit( 'ADD_USERS', res.data.resources )\r\n          this.searchInProgress = false\r\n        } )\r\n        .catch( err => {\r\n          this.foundUsers = [ ]\r\n          this.searchInProgress = false\r\n        } )\r\n    }, 1500 )\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n.hovered {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSearch.vue?vue&type=template&id=174f9bea&scoped=true&\"\nimport script from \"./UserSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSearch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSearch.vue?vue&type=style&index=0&id=174f9bea&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"174f9bea\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.resource)?_c('v-card',{staticClass:\"elevation-0\"},[_c('v-toolbar',{staticClass:\"elevation-0 transparent\"},[_c('v-icon',{attrs:{\"left\":\"\",\"small\":\"\"}},[_vm._v(\"book\")]),_c('span',{staticClass:\"title font-weight-light\"},[_vm._v(_vm._s(_vm.title)+\" Description\")]),_c('v-spacer'),_c('v-toolbar-items',[(_vm.editDescription===false && _vm.canEdit)?_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"primary\"},nativeOn:{\"click\":function($event){_vm.editDescription=true}}},[_vm._v(\"Edit\")]):_vm._e(),(_vm.editDescription===true)?_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.updateDescription($event)}}},[_vm._v(\"Done\")]):_vm._e()],1)],1),_c('v-divider'),_c('v-card-text',[_c('v-layout',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.editDescription),expression:\"!editDescription\"}]},[_c('v-flex',{attrs:{\"xs12\":\"\"},domProps:{\"innerHTML\":_vm._s(_vm.compiledDescription)}})],1),_c('v-layout',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editDescription),expression:\"editDescription\"}],attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"caption\",attrs:{\"xs12\":\"\"}},[_vm._v(\"\\n        Supports \"),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://en.wikipedia.org/wiki/Markdown#Example\"}},[_vm._v(\"markdown:\")]),_c('strong',[_vm._v(\" ** bold **\")]),_vm._v(\", \"),_c('i',[_vm._v(\"* italic *\")]),_vm._v(\", \"),_c('code',[_vm._v(\"# Heading 1\")]),_vm._v(\", \"),_c('code',[_vm._v(\"## Heading 2\")]),_vm._v(\", \"),_c('code',[_vm._v(\"[links](http://example.com)\")]),_vm._v(\", etc.\\n      \")]),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-textarea',{attrs:{\"box\":\"\",\"rows\":\"15\"},model:{value:(_vm.resource.description),callback:function ($$v) {_vm.$set(_vm.resource, \"description\", $$v)},expression:\"resource.description\"}})],1)],1)],1),(_vm.isStream)?_c('v-toolbar',{staticClass:\"elevation-0 transparent\",attrs:{\"transparent\":\"\",\"dense\":\"\"}},[_c('v-icon',{attrs:{\"left\":\"\",\"small\":\"\"}},[_vm._v(\"power_input\")]),_c('span',{staticClass:\"title font-weight-light\"},[_vm._v(\"Units\")])],1):_vm._e(),_c('v-divider'),(_vm.resource.baseProperties)?_c('v-card-text',{staticClass:\"md-caption\"},[_c('span',[_c('strong',[_vm._v(\"Units:\")]),_vm._v(\" \"+_vm._s(_vm.resource.baseProperties.units))]),_vm._v(\";\\n    \"),_c('span',[_c('strong',[_vm._v(\"Tolerance:\")]),_vm._v(\" \"+_vm._s(_vm.resource.baseProperties.tolerance))]),_vm._v(\".\\n  \")]):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card v-if='resource' class='elevation-0'>\r\n    <v-toolbar class='elevation-0 transparent'>\r\n      <v-icon left small>book</v-icon>\r\n      <span class='title font-weight-light'>{{title}} Description</span>\r\n      <v-spacer></v-spacer>\r\n      <v-toolbar-items>\r\n        <v-btn flat color='primary' v-if='editDescription===false && canEdit' @click.native='editDescription=true'>Edit</v-btn>\r\n        <v-btn flat color='primary' v-if='editDescription===true' @click.native='updateDescription'>Done</v-btn>\r\n      </v-toolbar-items>\r\n    </v-toolbar>\r\n    <v-divider></v-divider>\r\n    <v-card-text>\r\n      <v-layout v-show='!editDescription'>\r\n        <v-flex xs12 v-html='compiledDescription'></v-flex>\r\n      </v-layout>\r\n      <v-layout v-show='editDescription' row wrap>\r\n        <v-flex xs12 class=\"caption\">\r\n          Supports <a class='' target=\"_blank\" href='https://en.wikipedia.org/wiki/Markdown#Example'>markdown:</a><strong> ** bold **</strong>, <i>* italic *</i>, <code># Heading 1</code>, <code>## Heading 2</code>, <code>[links](http://example.com)</code>, etc.\r\n        </v-flex>\r\n        <v-flex xs12>\r\n          <v-textarea box rows='15' v-model=\"resource.description\"></v-textarea>\r\n        </v-flex>\r\n        </md-field>\r\n      </v-layout>\r\n    </v-card-text>\r\n     <v-toolbar transparent class='elevation-0 transparent' dense v-if='isStream'>\r\n      <v-icon left small>power_input</v-icon>\r\n      <span class='title font-weight-light'>Units</span>\r\n     </v-toolbar>\r\n     <v-divider></v-divider>\r\n    <v-card-text class='md-caption' v-if='resource.baseProperties'>\r\n      <span><strong>Units:</strong> {{resource.baseProperties.units}}</span>;\r\n      <span><strong>Tolerance:</strong> {{resource.baseProperties.tolerance}}</span>.\r\n    </v-card-text>\r\n  </v-card>\r\n</template>\r\n<script>\r\nimport debounce from 'lodash.debounce'\r\nimport marked from 'marked'\r\n\r\nexport default {\r\n  name: 'DetailDescription',\r\n  props: {\r\n    resource: Object,\r\n  },\r\n  computed: {\r\n    title ( ) {\r\n      if ( this.isStream ) return \"Stream\"\r\n      else if ( this.isProcessor ) return \"Processor\"\r\n      else return \"Project\"\r\n    },\r\n    compiledDescription( ) {\r\n      return marked( this.resource.description, { sanitize: true } )\r\n    },\r\n    canEdit( ) {\r\n      return this.isOwner ? true : this.resource.canWrite.indexOf( this.$store.state.user._id ) !== -1\r\n    },\r\n    isOwner( ) {\r\n      return this.resource.owner === this.$store.state.user._id\r\n    },\r\n    isStream( ) {\r\n      return this.resource.hasOwnProperty( 'streamId' )\r\n    },\r\n    isProcessor( ) {\r\n      return this.resource.hasOwnProperty( 'blocks' )\r\n    }\r\n  },\r\n  data( ) {\r\n    return {\r\n      editDescription: false\r\n    }\r\n  },\r\n  methods: {\r\n    updateDescription( ) {\r\n      this.editDescription = false\r\n      if ( this.isStream )\r\n        this.$store.dispatch( 'updateStream', { streamId: this.resource.streamId, description: this.resource.description } )\r\n      else if ( this.isProcessor )\r\n        this.$store.dispatch( 'updateProcessor', { _id: this.resource._id, description: this.resource.description } )\r\n      else\r\n        this.$store.dispatch( 'updateProject', { _id: this.resource._id, description: this.resource.description } )\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailDescription.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailDescription.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailDescription.vue?vue&type=template&id=14a82606&scoped=true&\"\nimport script from \"./DetailDescription.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailDescription.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14a82606\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPermissionProjectCard.vue?vue&type=style&index=0&id=517af5a7&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPermissionProjectCard.vue?vue&type=style&index=0&id=517af5a7&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamSearch.vue?vue&type=style&index=0&id=771cb2f0&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamSearch.vue?vue&type=style&index=0&id=771cb2f0&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSearch.vue?vue&type=style&index=0&id=174f9bea&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSearch.vue?vue&type=style&index=0&id=174f9bea&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"align-center\":\"\",\"row\":\"\",\"wrap\":\"\"},on:{\"mouseleave\":_vm.mouseLeave}},[_c('v-flex',{staticClass:\"pb-0\",attrs:{\"xs12\":\"\"}},[_c('v-text-field',{ref:\"searchField\",attrs:{\"autofocus\":\"\",\"box\":\"\",\"flat\":\"\",\"clearable\":\"\",\"prepend-inner-icon\":\"search\",\"label\":\"search for streams\",\"spellcheck\":\"false\",\"disabled\":_vm.globalDisabled,\"loading\":_vm.searchInProgress,\"append-icon\":\"refresh\"},on:{\"input\":_vm.updateSearch,\"click:append\":function($event){return _vm.$store.dispatch( 'getStreams', 'omit=objects,layers&isComputedResult=false&sort=updatedAt' )}},model:{value:(_vm.searchfilter),callback:function ($$v) {_vm.searchfilter=$$v},expression:\"searchfilter\"}})],1),(_vm.showSearchResults)?_c('v-flex',{staticClass:\"mb-5\",staticStyle:{\"margin-top\":\"-30px\"},attrs:{\"xs12\":\"\"}},[_c('v-card',{staticClass:\"elevation-10\"},[_c('v-card-title',{staticClass:\"subheading\"},[_vm._v(\"Search results (\"+_vm._s(_vm.paginatedStreams.length)+\" streams)\")]),_c('v-divider'),(_vm.paginatedStreams.length>0)?_c('v-card-text',{staticStyle:{\"max-height\":\"410px\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.filters.length > 0)?_c('v-list',{attrs:{\"two-line\":\"\"}},_vm._l((_vm.paginatedStreams),function(stream){return _c('v-list-tile',{key:stream.streamId},[_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"\\n                \"+_vm._s(stream.name)+\"\\n              \")]),_c('v-list-tile-sub-title',{staticClass:\"caption\"},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"fingerprint\")]),_c('span',{staticClass:\"caption\",staticStyle:{\"user-select\":\"all\"}},[_vm._v(_vm._s(stream.streamId))]),_vm._v(\" \"),_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"edit\")]),_c('timeago',{attrs:{\"datetime\":stream.updatedAt}})],1)],1),_c('v-list-tile-action',[_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"depressed\":\"\"},nativeOn:{\"click\":function($event){return _vm.selectStream(stream.streamId)}}},[_c('v-icon',[_vm._v(\"add\")])],1)],1)],1)}),1):_vm._e()],1):_vm._e()],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-layout align-center row wrap @mouseleave='mouseLeave'>\r\n    <v-flex xs12 class='pb-0'>\r\n      <v-text-field ref=\"searchField\" autofocus box flat clearable prepend-inner-icon=\"search\" label='search for streams' @input=\"updateSearch\" v-model='searchfilter' spellcheck=\"false\" :disabled='globalDisabled' :loading='searchInProgress' append-icon=\"refresh\" @click:append=\"$store.dispatch( 'getStreams', 'omit=objects,layers&isComputedResult=false&sort=updatedAt' )\"></v-text-field>\r\n    </v-flex>\r\n    <v-flex xs12 v-if='showSearchResults' style='margin-top:-30px' class='mb-5'>\r\n      <v-card class='elevation-10'>\r\n        <v-card-title class='subheading'>Search results ({{paginatedStreams.length}} streams)</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style='max-height: 410px; overflow-y: auto; overflow-x: hidden;' v-if='paginatedStreams.length>0'>\r\n          <v-list two-line v-if='filters.length > 0'>\r\n            <v-list-tile v-for='stream in paginatedStreams' :key='stream.streamId'>\r\n              <v-list-tile-content>\r\n                <v-list-tile-title>\r\n                  {{stream.name}}\r\n                </v-list-tile-title>\r\n                <v-list-tile-sub-title class='caption'>\r\n                  <v-icon small>fingerprint</v-icon><span class='caption' style=\"user-select:all;\">{{stream.streamId}}</span>&nbsp;<v-icon small>edit</v-icon>\r\n                  <timeago :datetime='stream.updatedAt'></timeago>\r\n                </v-list-tile-sub-title>\r\n              </v-list-tile-content>\r\n              <v-list-tile-action>\r\n                <v-btn fab small depressed @click.native='selectStream(stream.streamId)'>\r\n                  <v-icon>add</v-icon>\r\n                </v-btn>\r\n              </v-list-tile-action>\r\n            </v-list-tile>\r\n          </v-list>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-flex>\r\n  </v-layout>\r\n</template>\r\n<script>\r\nimport debounce from 'lodash.debounce'\r\n\r\nexport default {\r\n  name: 'StreamSearch',\r\n  props: {\r\n    streamsToOmit: {\r\n      type: Array,\r\n      default ( ) { return [ ] }\r\n    },\r\n    globalDisabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    writeOnly: Boolean\r\n  },\r\n  computed: {\r\n    filteredStreams( ) {\r\n      return this.$store.getters.filteredResources( this.filters, \"streams\" ).filter( s => this.streamsToOmit.indexOf( s.streamId ) === -1 )\r\n    },\r\n    paginatedStreams( ) {\r\n      let toReturn = this.filteredStreams.slice( this.startIndex, this.endIndex )\r\n      if ( this.writeOnly )\r\n        toReturn = toReturn.filter( s => s.owner === this.$store.state.user._id || s.canWrite.indexOf( this.$store.state.user._id ) > -1 )\r\n      return toReturn\r\n    }\r\n  },\r\n  watch: {\r\n    searchfilter( val ) {\r\n      if ( val === '' || val === null ) {\r\n        this.showSearchResults = false\r\n        this.searchInProgress = false\r\n      } else\r\n        this.searchInProgress = true\r\n    }\r\n  },\r\n  data( ) {\r\n    return {\r\n      searchfilter: '',\r\n      filters: [ ],\r\n      showSearchResults: false,\r\n      searchInProgress: false,\r\n      startIndex: 0,\r\n      endIndex: 42\r\n    }\r\n  },\r\n  methods: {\r\n    mouseLeave() {\r\n      this.$refs.searchField.blur()\r\n    },\r\n    refreshStreams( ) {\r\n      this.$store.dispatch( 'getStreams', 'omit=objects,layers&isComputedResult=false&sort=updatedAt' )\r\n    },\r\n    selectStream( streamId ) {\r\n      this.$emit( 'selected-stream', streamId )\r\n    },\r\n    updateSearch: debounce( function( e ) {\r\n      this.searchfilter = e\r\n\r\n      if ( e === '' || e === null ) {\r\n        this.showSearchResults = false\r\n        return\r\n      }\r\n      this.showSearchResults = true\r\n      this.searchInProgress = false\r\n      try {\r\n        let filters = this.searchfilter.split( ' ' ).map( t => {\r\n          if ( t.includes( ':' ) )\r\n            return { key: t.split( ':' )[ 0 ], value: t.split( ':' )[ 1 ] }\r\n          else if ( !t.includes( 'public' ) && !t.includes( 'private' ) && !t.includes( 'mine' ) && !t.includes( 'shared' ) ) // TODO: not elegant\r\n            return { key: 'name', value: t }\r\n          else\r\n            return { key: t, value: null }\r\n        } )\r\n        this.filters = filters\r\n      } catch {\r\n        this.filters = [ { key: 'name', value: e } ]\r\n      }\r\n    }, 1000 ),\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n.hovered {\r\n  cursor: pointer;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StreamSearch.vue?vue&type=template&id=771cb2f0&scoped=true&\"\nimport script from \"./StreamSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./StreamSearch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StreamSearch.vue?vue&type=style&index=0&id=771cb2f0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"771cb2f0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}